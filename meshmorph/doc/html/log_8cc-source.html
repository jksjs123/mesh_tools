<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>meshmorph: log.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>log.cc</h1><a href="log_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include "<a class="code" href="log_8h.html">log.h</a>"</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;sys/time.h&gt;</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;cassert&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="box_8h.html">box.h</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="container_8h.html">container.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="edge_8h.html">edge.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="face_8h.html">face.h</a>"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="gain__schedule_8h.html">gain_schedule.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="intersecting__faces_8h.html">intersecting_faces.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "<a class="code" href="misc_8h.html">misc.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include "<a class="code" href="nice_8h.html">nice.h</a>"</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include "<a class="code" href="object_8h.html">object.h</a>"</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include "<a class="code" href="refractory_8h.html">refractory.h</a>"</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include "<a class="code" href="state_8h.html">state.h</a>"</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include "<a class="code" href="space_8h.html">space.h</a>"</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include "<a class="code" href="vertex_8h.html">vertex.h</a>"</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include "<a class="code" href="vertex__schedule_8h.html">vertex_schedule.h</a>"</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "<a class="code" href="virtual__disp_8h.html">virtual_disp.h</a>"</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="keyword">using</span> std::cout;
<a name="l00026"></a>00026 <span class="keyword">using</span> std::endl;
<a name="l00027"></a>00027 <span class="keyword">using</span> std::left;
<a name="l00028"></a>00028 <span class="keyword">using</span> std::right;
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <a class="code" href="classLog.html">Log</a> * Log::only_one = NULL;
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="classLog.html#560f0bdc9894198be1466c9888acb6fe">00032</a> <a class="code" href="classLog.html">Log</a> &amp; <a class="code" href="classLog.html#560f0bdc9894198be1466c9888acb6fe">Log::instance</a>()
<a name="l00033"></a>00033 {
<a name="l00034"></a>00034   <span class="comment">// Not thread-safe.</span>
<a name="l00035"></a>00035   <span class="comment">// -- lock mutex</span>
<a name="l00036"></a>00036   <span class="keywordflow">if</span> (only_one == NULL)
<a name="l00037"></a>00037     only_one = <span class="keyword">new</span> <a class="code" href="classLog.html">Log</a>();
<a name="l00038"></a>00038   <span class="comment">// -- unlock mutex</span>
<a name="l00039"></a>00039   <span class="keywordflow">return</span> *only_one;
<a name="l00040"></a>00040 }
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 Log::Log (<span class="keywordtype">void</span>)
<a name="l00043"></a>00043   :Olist(),Cfile(),Mfile(),num_verts(0),box_mean(0),box_min(1000000),
<a name="l00044"></a>00044   box_max(-1000000),face_mean(0),face_min(1000000),face_max(-1000000),
<a name="l00045"></a>00045   num_sets(0),vps_mean(0),vps_min(1000000),vps_max(-1000000),
<a name="l00046"></a>00046   N(0),touch_histo_freq(0),interval(0),d_min(1E30),d_max(-1E30),md(2,0),
<a name="l00047"></a>00047   vv(0),topN_val(2,0),vd_val(2,0),sepdis(2,0),p_orig(3,-1.0),
<a name="l00048"></a>00048   p_new(3,-1.0),cp_orig(3,-1.0),cp_new(3,-1.0),trouble(0),
<a name="l00049"></a>00049   num_faces(0),bpf_mean(0),bpf_min(1000000),bpf_max(-1000000),
<a name="l00050"></a>00050   num_boxes(0),num_empty_boxes(0),fpb_mean(0),fpb_min(1000000),fpb_max(-1000000),
<a name="l00051"></a>00051   t1(0),tim(),currtime()
<a name="l00052"></a>00052 {
<a name="l00053"></a>00053   <a class="code" href="classLog.html#6b1c1f2e8eba5b16cc15b3ab925372ec">setTime</a>(time(NULL));
<a name="l00054"></a>00054   <a class="code" href="classLog.html#a7ef9d9b914c949517c05d5c2cb8ab43">mainFileInit</a>();
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 Log::Log (<span class="keyword">const</span> <a class="code" href="classLog.html">Log</a>&amp; rhs)
<a name="l00059"></a>00059   :Olist(),Cfile(),Mfile(),num_verts(0),box_mean(0),box_min(1000000),
<a name="l00060"></a>00060   box_max(-1000000),face_mean(0),face_min(1000000),face_max(-1000000),
<a name="l00061"></a>00061   num_sets(0),vps_mean(0),vps_min(1000000),vps_max(-1000000),
<a name="l00062"></a>00062   N(0),touch_histo_freq(0),interval(0),d_min(1E30),d_max(-1E30),md(2,0),
<a name="l00063"></a>00063   vv(0),topN_val(2,0),vd_val(2,0),sepdis(2,0),p_orig(3,-1.0),
<a name="l00064"></a>00064   p_new(3,-1.0),cp_orig(3,-1.0),cp_new(3,-1.0),trouble(0),
<a name="l00065"></a>00065   num_faces(0),bpf_mean(0),bpf_min(1000000),bpf_max(-1000000),
<a name="l00066"></a>00066   num_boxes(0),num_empty_boxes(0),fpb_mean(0),fpb_min(1000000),fpb_max(-1000000),
<a name="l00067"></a>00067   t1(0),tim(),currtime()
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069   cout &lt;&lt; <span class="stringliteral">"Copy constructor prohibited on instances of Log class.\n"</span>;
<a name="l00070"></a>00070   cout &lt;&lt; <span class="stringliteral">"Log "</span> &lt;&lt; rhs.<a class="code" href="classLog.html#293c4b78f38417ce28455cfea6a2dc36">N</a> &lt;&lt; endl;
<a name="l00071"></a>00071   exit(0);
<a name="l00072"></a>00072 }
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <a class="code" href="classLog.html">Log</a>&amp; Log::operator = (<span class="keyword">const</span> <a class="code" href="classLog.html">Log</a>&amp; rhs)
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076   cout &lt;&lt; <span class="stringliteral">"Assignment operator prohibited on instances of Log class.\n"</span>;
<a name="l00077"></a>00077   cout &lt;&lt; <span class="stringliteral">"VTRack "</span> &lt;&lt; rhs.<a class="code" href="classLog.html#293c4b78f38417ce28455cfea6a2dc36">N</a> &lt;&lt; endl;
<a name="l00078"></a>00078   exit(0);
<a name="l00079"></a>00079 }
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="classLog.html#5a5bf6231b9a3af27a535bfe60307b55">00081</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#5a5bf6231b9a3af27a535bfe60307b55">Log::groupInit</a> (<span class="keywordtype">void</span>)
<a name="l00082"></a>00082 {
<a name="l00083"></a>00083   <span class="comment">// intialize vertex displacement stats</span>
<a name="l00084"></a>00084   <a class="code" href="classLog.html#b9a9ee2553ef9a26e303b91b37bf26bf">clearVals</a>();
<a name="l00085"></a>00085   <span class="comment">// initialize variable used to track how many times each vertex was moved</span>
<a name="l00086"></a>00086   touch_histo_freq = 0;
<a name="l00087"></a>00087   <span class="comment">// track elapsed time</span>
<a name="l00088"></a>00088   gettimeofday(&amp;tim,NULL);
<a name="l00089"></a>00089   t1=tim.tv_sec+(tim.tv_usec/1000000.0);
<a name="l00090"></a>00090 }
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="classLog.html#af3c3eedd14c1c3b3ca3542784ad7afd">00092</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#af3c3eedd14c1c3b3ca3542784ad7afd">Log::updateStatsAndPrint</a> (<span class="keywordtype">void</span>)
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094   <span class="comment">// update container stats</span>
<a name="l00095"></a>00095   <a class="code" href="classLog.html#f559bf13dc4c7419c7a248f05a7ce5f5">updateStats</a>(sqrt(<a class="code" href="classState.html#cd3aa3488c0124d7d4774ff0f7250685">State::instance</a>().getVD2()));
<a name="l00096"></a>00096   <span class="comment">// print number of times each vertex has been moved</span>
<a name="l00097"></a>00097   <span class="keywordflow">if</span>(!<a class="code" href="controls_8h.html#cf6452cec0b2484cbe8de17c06e47d45">WRITE_MESH_EVERY_ITERATION</a> &amp;&amp; touch_histo_freq==<a class="code" href="controls_8h.html#d4921b80b39f96654d169b4d861addf0">VERTEX_TOUCH_HISTOGRAM_FREQUENCY</a>)
<a name="l00098"></a>00098   {
<a name="l00099"></a>00099     touch_histo_freq = 0;
<a name="l00100"></a>00100     <a class="code" href="classLog.html#4f24ce1395fd882e258328e05f50d0db">printVertexSelect</a>(++interval);
<a name="l00101"></a>00101   }
<a name="l00102"></a>00102   <span class="comment">// print to stdout</span>
<a name="l00103"></a>00103   <span class="comment">//if(!((Vertex_Schedule::instance().count-1)%1000))</span>
<a name="l00104"></a>00104   <span class="comment">//if(Vertex_Schedule::instance().getNumMovedVertsGroup()-1)</span>
<a name="l00105"></a>00105   <span class="comment">//{</span>
<a name="l00106"></a>00106   <span class="comment">//  if(PRINT_FLAG)</span>
<a name="l00107"></a>00107   <span class="comment">//  {</span>
<a name="l00108"></a>00108   <span class="comment">//    char name[1024];</span>
<a name="l00109"></a>00109   <span class="comment">//    sprintf(name,"bpf (%.6g,%.6g,%.6g), ",bpf_min,bpf_mean,bpf_max);</span>
<a name="l00110"></a>00110   <span class="comment">//    cout &lt;&lt; left &lt;&lt; name;</span>
<a name="l00111"></a>00111   <span class="comment">//    sprintf(name,"fpb (%.6g,%.6g,%.6g), ",fpb_min,fpb_mean,fpb_max);</span>
<a name="l00112"></a>00112   <span class="comment">//    cout &lt;&lt; left &lt;&lt; name;</span>
<a name="l00113"></a>00113   <span class="comment">//  }</span>
<a name="l00114"></a>00114   <span class="comment">//}</span>
<a name="l00115"></a>00115 }
<a name="l00116"></a>00116 
<a name="l00117"></a><a class="code" href="classLog.html#4f24ce1395fd882e258328e05f50d0db">00117</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#4f24ce1395fd882e258328e05f50d0db">Log::printVertexSelect</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l00118"></a>00118 {
<a name="l00119"></a>00119   <span class="keywordtype">int</span> zero=0;
<a name="l00120"></a>00120   <span class="comment">// open log file</span>
<a name="l00121"></a>00121   <span class="keywordtype">char</span> sint[128];
<a name="l00122"></a>00122   sprintf(sint,<span class="stringliteral">".%d"</span>,group);
<a name="l00123"></a>00123   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> line(sint);
<a name="l00124"></a>00124   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#6ae1d15d781d2728d3137800926d1493">VERTEX_SELECTION_FILE</a> + line;
<a name="l00125"></a>00125   std::ofstream this_file (file.c_str());
<a name="l00126"></a>00126   <span class="comment">//for(o_it i=Container::instance().o.begin();i!=Container::instance().o.end();i++)</span>
<a name="l00127"></a>00127   <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#bc066bbbef7a11c4ee8fa91ec325d609">o_cit</a> i=<a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().o.begin();i!=<a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#c3ac0ef8e13fb01215064cd9bd24ff85">o</a>.end();i++)
<a name="l00128"></a>00128   {
<a name="l00129"></a>00129     <span class="comment">//for(v_it j=i-&gt;v.begin();j!=i-&gt;v.end();j++)</span>
<a name="l00130"></a>00130     <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#dfa48b42fdac70f72a266296787d27e6">v_cit</a> j=i-&gt;v.begin();j!=i-&gt;v.end();j++)
<a name="l00131"></a>00131     {
<a name="l00132"></a>00132       <span class="comment">//vhm_it t = Refractory::instance().touch_map.find(const_cast&lt;Vertex*&gt;(&amp;(*j)));</span>
<a name="l00133"></a>00133       <span class="comment">// if vertex was touched</span>
<a name="l00134"></a>00134       <span class="keywordflow">if</span>(<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().vertexInTouchMap(const_cast&lt;Vertex*&gt;(&amp;(*j)))==<span class="keyword">true</span>)
<a name="l00135"></a>00135       {
<a name="l00136"></a>00136         this_file &lt;&lt; <a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().<a class="code" href="classRefractory.html#2b1e8b8e5589bacfa128d0b372fcd2ee">numVertexTouches</a>(const_cast&lt;Vertex*&gt;(&amp;(*j))) &lt;&lt; endl;
<a name="l00137"></a>00137       }
<a name="l00138"></a>00138       <span class="keywordflow">else</span>
<a name="l00139"></a>00139       {
<a name="l00140"></a>00140         this_file &lt;&lt; zero &lt;&lt; endl;
<a name="l00141"></a>00141       }
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143   }
<a name="l00144"></a>00144   this_file.close();
<a name="l00145"></a>00145 }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 <span class="comment">//void Log::getFacesPerBox (void)</span>
<a name="l00148"></a>00148 <span class="comment">//{</span>
<a name="l00149"></a>00149 <span class="comment">//  fpb_min = 1E30;</span>
<a name="l00150"></a>00150 <span class="comment">//  fpb_max = -1E30;</span>
<a name="l00151"></a>00151 <span class="comment">//  int n=0;</span>
<a name="l00152"></a>00152 <span class="comment">//  double summ=0;</span>
<a name="l00153"></a>00153 <span class="comment">//  // for each box in space</span>
<a name="l00154"></a>00154 <span class="comment">//  //for (b_it i=s.b.begin();i!=s.b.end();i++)</span>
<a name="l00155"></a>00155 <span class="comment">//  for (b_cit i=Space::instance().begin();i!=Space::instance().end();i++)</span>
<a name="l00156"></a>00156 <span class="comment">//  {</span>
<a name="l00157"></a>00157 <span class="comment">//    int a = i-&gt;getNumFaces();</span>
<a name="l00158"></a>00158 <span class="comment">//    if(a)</span>
<a name="l00159"></a>00159 <span class="comment">//    {</span>
<a name="l00160"></a>00160 <span class="comment">//      n++;</span>
<a name="l00161"></a>00161 <span class="comment">//      summ+=a;</span>
<a name="l00162"></a>00162 <span class="comment">//      if(a&gt;fpb_max){fpb_max=a;} </span>
<a name="l00163"></a>00163 <span class="comment">//      if(a&lt;fpb_min){fpb_min=a;} </span>
<a name="l00164"></a>00164 <span class="comment">//    }</span>
<a name="l00165"></a>00165 <span class="comment">//  }</span>
<a name="l00166"></a>00166 <span class="comment">//  fpb_mean=summ/n;</span>
<a name="l00167"></a>00167 <span class="comment">//}</span>
<a name="l00168"></a>00168 
<a name="l00169"></a><a class="code" href="classLog.html#d67a7a57460b120606507882388c1c7b">00169</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#d67a7a57460b120606507882388c1c7b">Log::writeSepDistances</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l00170"></a>00170 {
<a name="l00171"></a>00171   <span class="comment">//cout &lt;&lt; "Writing separation distances to files..........";</span>
<a name="l00172"></a>00172   <span class="comment">//cout.flush();</span>
<a name="l00173"></a>00173   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> file,
<a name="l00174"></a>00174         file_NOCP,
<a name="l00175"></a>00175         file_haus1,
<a name="l00176"></a>00176         file_haus2,
<a name="l00177"></a>00177         file_haus1_noself,
<a name="l00178"></a>00178         file_haus2_noself;
<a name="l00179"></a>00179   <span class="comment">// create output filename</span>
<a name="l00180"></a>00180   <span class="keywordflow">if</span> (<a class="code" href="controls_8h.html#a1291487e3991ede138aa159cb44eb5c">APPEND_ITERATION_NUMBER_TO_DISTANCES</a>)
<a name="l00181"></a>00181   {
<a name="l00182"></a>00182     <span class="keywordtype">char</span> sint[128];
<a name="l00183"></a>00183     <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> line;
<a name="l00184"></a>00184     sprintf(sint,<span class="stringliteral">"closest_point_distances_%i.dat"</span>,group);
<a name="l00185"></a>00185     line = sint;
<a name="l00186"></a>00186     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00187"></a>00187     sprintf(sint,<span class="stringliteral">"closest_point_distances_NOCP_%i.dat"</span>,group);
<a name="l00188"></a>00188     line = sint;
<a name="l00189"></a>00189     file_NOCP = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00190"></a>00190     sprintf(sint,<span class="stringliteral">"closest_point_distances_one_sided_hausdorff_%i.dat"</span>,group);
<a name="l00191"></a>00191     line = sint;
<a name="l00192"></a>00192     file_haus1 = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00193"></a>00193     sprintf(sint,<span class="stringliteral">"closest_point_distances_two_sided_hausdorff_%i.dat"</span>,group);
<a name="l00194"></a>00194     line = sint;
<a name="l00195"></a>00195     file_haus2 = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00196"></a>00196     sprintf(sint,<span class="stringliteral">"closest_point_distances_one_sided_hausdorff_noself_%i.dat"</span>,group);
<a name="l00197"></a>00197     line = sint;
<a name="l00198"></a>00198     file_haus1_noself = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00199"></a>00199     sprintf(sint,<span class="stringliteral">"closest_point_distances_two_sided_hausdorff_noself_%i.dat"</span>,group);
<a name="l00200"></a>00200     line = sint;
<a name="l00201"></a>00201     file_haus2_noself = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00202"></a>00202   }
<a name="l00203"></a>00203   <span class="keywordflow">else</span>
<a name="l00204"></a>00204   {
<a name="l00205"></a>00205     <span class="keywordtype">char</span> sint[128];
<a name="l00206"></a>00206     <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> line;
<a name="l00207"></a>00207     sprintf(sint,<span class="stringliteral">"closest_point_distances.dat"</span>);
<a name="l00208"></a>00208     line = sint;
<a name="l00209"></a>00209     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00210"></a>00210     sprintf(sint,<span class="stringliteral">"closest_point_distances_NOCP.dat"</span>);
<a name="l00211"></a>00211     line = sint;
<a name="l00212"></a>00212     file_NOCP = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00213"></a>00213     sprintf(sint,<span class="stringliteral">"closest_point_distances_one_sided_hausdorff.dat"</span>);
<a name="l00214"></a>00214     line = sint;
<a name="l00215"></a>00215     file_haus1 = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00216"></a>00216     sprintf(sint,<span class="stringliteral">"closest_point_distances_two_sided_hausdorff.dat"</span>);
<a name="l00217"></a>00217     line = sint;
<a name="l00218"></a>00218     file_haus2 = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00219"></a>00219     sprintf(sint,<span class="stringliteral">"closest_point_distances_one_sided_hausdorff_noself.dat"</span>);
<a name="l00220"></a>00220     line = sint;
<a name="l00221"></a>00221     file_haus1_noself = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00222"></a>00222     sprintf(sint,<span class="stringliteral">"closest_point_distances_two_sided_hausdorff_noself.dat"</span>);
<a name="l00223"></a>00223     line = sint;
<a name="l00224"></a>00224     file_haus2_noself = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + line;
<a name="l00225"></a>00225   }
<a name="l00226"></a>00226   <span class="comment">// open output files</span>
<a name="l00227"></a>00227   std::ofstream out,
<a name="l00228"></a>00228         out_NOCP,
<a name="l00229"></a>00229         out_haus1,
<a name="l00230"></a>00230         out_haus2,
<a name="l00231"></a>00231         out_haus1_noself,
<a name="l00232"></a>00232         out_haus2_noself;
<a name="l00233"></a>00233   out.open (file.c_str());
<a name="l00234"></a>00234   <span class="keywordflow">if</span>(out.fail())
<a name="l00235"></a>00235   {
<a name="l00236"></a>00236     fprintf(stderr,<span class="stringliteral">"\nCouldn't open output file %s\n"</span>,file.c_str());
<a name="l00237"></a>00237     exit(0);
<a name="l00238"></a>00238   }
<a name="l00239"></a>00239   out_NOCP.open (file_NOCP.c_str());
<a name="l00240"></a>00240   <span class="keywordflow">if</span>(out_NOCP.fail())
<a name="l00241"></a>00241   {
<a name="l00242"></a>00242     fprintf(stderr,<span class="stringliteral">"\nCouldn't open output file %s\n"</span>,file_NOCP.c_str());
<a name="l00243"></a>00243     exit(0);
<a name="l00244"></a>00244   }
<a name="l00245"></a>00245   out_haus1.open (file_haus1.c_str());
<a name="l00246"></a>00246   <span class="keywordflow">if</span>(out_haus1.fail())
<a name="l00247"></a>00247   {
<a name="l00248"></a>00248     fprintf(stderr,<span class="stringliteral">"\nCouldn't open output file %s\n"</span>,file_haus1.c_str());
<a name="l00249"></a>00249     exit(0);
<a name="l00250"></a>00250   }
<a name="l00251"></a>00251   out_haus2.open (file_haus2.c_str());
<a name="l00252"></a>00252   <span class="keywordflow">if</span>(out_haus2.fail())
<a name="l00253"></a>00253   {
<a name="l00254"></a>00254     fprintf(stderr,<span class="stringliteral">"\nCouldn't open output file %s\n"</span>,file_haus2.c_str());
<a name="l00255"></a>00255     exit(0);
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257   out_haus1_noself.open (file_haus1_noself.c_str());
<a name="l00258"></a>00258   <span class="keywordflow">if</span>(out_haus1_noself.fail())
<a name="l00259"></a>00259   {
<a name="l00260"></a>00260     fprintf(stderr,<span class="stringliteral">"\nCouldn't open output file %s\n"</span>,file_haus1_noself.c_str());
<a name="l00261"></a>00261     exit(0);
<a name="l00262"></a>00262   }
<a name="l00263"></a>00263   out_haus2_noself.open (file_haus2_noself.c_str());
<a name="l00264"></a>00264   <span class="keywordflow">if</span>(out_haus2_noself.fail())
<a name="l00265"></a>00265   {
<a name="l00266"></a>00266     fprintf(stderr,<span class="stringliteral">"\nCouldn't open output file %s\n"</span>,file_haus2_noself.c_str());
<a name="l00267"></a>00267     exit(0);
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269   out.precision(4);
<a name="l00270"></a>00270   out_NOCP.precision(4);
<a name="l00271"></a>00271   out_haus1.precision(4);
<a name="l00272"></a>00272   out_haus2.precision(4);
<a name="l00273"></a>00273   out_haus1_noself.precision(4);
<a name="l00274"></a>00274   out_haus2_noself.precision(4);
<a name="l00275"></a>00275   out_NOCP &lt;&lt; <span class="stringliteral">"x_coordinate y_coordinate z_coordinate state_value x_normal y_normal z_normal\n"</span>;
<a name="l00276"></a>00276   <span class="comment">// declare variables</span>
<a name="l00277"></a>00277   <span class="keywordtype">int</span> total_vertices=0,vertices_used=0,vertices_used_noself=0;
<a name="l00278"></a>00278   <a class="code" href="meshmorph_8h.html#fba66f29e65f5c2a587dc06898586c00">sd_it</a> w,x;
<a name="l00279"></a>00279   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> ss,t;
<a name="l00280"></a>00280   <a class="code" href="meshmorph_8h.html#fd27f9892458fbfa1caf658f4f45260d">map_s_d</a> hausdorff_2_noself; <span class="comment">// create map: string-&gt;double</span>
<a name="l00281"></a>00281   <a class="code" href="meshmorph_8h.html#fd27f9892458fbfa1caf658f4f45260d">map_s_d</a> hausdorff_2;        <span class="comment">// create map: string-&gt;double</span>
<a name="l00282"></a>00282   <a class="code" href="meshmorph_8h.html#fd27f9892458fbfa1caf658f4f45260d">map_s_d</a> hausdorff_1_noself; <span class="comment">// create map: string-&gt;double</span>
<a name="l00283"></a>00283   <a class="code" href="meshmorph_8h.html#fd27f9892458fbfa1caf658f4f45260d">map_s_d</a> hausdorff_1;        <span class="comment">// create map: string-&gt;double</span>
<a name="l00284"></a>00284   <a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> storage_1_noself;
<a name="l00285"></a>00285   <a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> storage_2_noself;
<a name="l00286"></a>00286   <a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> storage_1;
<a name="l00287"></a>00287   <a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> storage_2;
<a name="l00288"></a>00288   <span class="comment">// for each object</span>
<a name="l00289"></a>00289   <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#ee98e25193e5b352ac2eefbd05ccde6a">o_it</a> i=<a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().o.begin();i!=<a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#c3ac0ef8e13fb01215064cd9bd24ff85">o</a>.end();i++)
<a name="l00290"></a>00290   {
<a name="l00291"></a>00291     hausdorff_1.clear();
<a name="l00292"></a>00292     hausdorff_1_noself.clear();
<a name="l00293"></a>00293     <span class="comment">// for each vertex in object</span>
<a name="l00294"></a>00294     <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#3263d78f676958dea30d353e47e8b889">v_it</a> j=i-&gt;v.begin();j!=i-&gt;v.end();j++)
<a name="l00295"></a>00295     {
<a name="l00296"></a>00296       total_vertices++;
<a name="l00297"></a>00297       <span class="comment">// if vertex has a closest face</span>
<a name="l00298"></a>00298       <span class="keywordflow">if</span>(j-&gt;getFace()!=NULL)
<a name="l00299"></a>00299       {
<a name="l00300"></a>00300         vertices_used++;
<a name="l00301"></a>00301         <span class="comment">// get closest point</span>
<a name="l00302"></a>00302         <span class="comment">//double pC[3];</span>
<a name="l00303"></a>00303         <span class="comment">//vec_d pC = Container::instance().getNearPtOnFaceToVertex(j-&gt;getFace(),&amp;(*j));</span>
<a name="l00304"></a>00304         <a class="code" href="meshmorph_8h.html#1f34905de522641c355a51fe9e3f1149">vec_fp</a> fp(1,const_cast&lt;Face*&gt;(j-&gt;getFace()));
<a name="l00305"></a>00305         <a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> p;
<a name="l00306"></a>00306         <span class="keywordtype">double</span> sqd=0.0;
<a name="l00307"></a>00307         <a class="code" href="classFace.html">Face</a> *ncl = NULL;
<a name="l00308"></a>00308         <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#b2dcd71e2d3a21f3977a9de3c49e99c9">findClosestPtToVertexAmongFaces</a>(&amp;(*j),fp,p,sqd,ncl);
<a name="l00309"></a>00309         <span class="keywordtype">double</span> dd = sqrt(sqd);
<a name="l00310"></a>00310         <span class="comment">// compute separation vector</span>
<a name="l00311"></a>00311         <span class="comment">//double s[3];</span>
<a name="l00312"></a>00312         <span class="comment">//for(int k=0;k&lt;3;k++){ s[k]=pC[k]-j-&gt;getCoord(k); }</span>
<a name="l00313"></a>00313         <span class="comment">// compute separation distance</span>
<a name="l00314"></a>00314         <span class="keywordflow">if</span>(<a class="code" href="classNice.html#0e7a8f2b7f6c9e5a41b4f0a106a7614e">Nice::instance</a>().vertexIsNice(&amp;(*j))==<span class="keyword">false</span>){ dd=-dd;}
<a name="l00315"></a>00315         <span class="comment">// print separation distance</span>
<a name="l00316"></a>00316         out &lt;&lt; dd &lt;&lt; endl;
<a name="l00318"></a>00318         <span class="comment">// if object found in map</span>
<a name="l00319"></a>00319         w=hausdorff_1.find((j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>());
<a name="l00320"></a>00320         <span class="keywordflow">if</span>(w!=hausdorff_1.end())
<a name="l00321"></a>00321         {
<a name="l00322"></a>00322           <span class="comment">// if new separation distance is larger than stored value</span>
<a name="l00323"></a>00323           <span class="keywordflow">if</span>(dd&gt;(*w).second){hausdorff_1[(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>()]=dd;}
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325         <span class="keywordflow">else</span>
<a name="l00326"></a>00326         {
<a name="l00327"></a>00327           <span class="comment">// add distance to map</span>
<a name="l00328"></a>00328           hausdorff_1[(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>()]=dd;
<a name="l00329"></a>00329         }
<a name="l00332"></a>00332         <span class="comment">// if object found in map</span>
<a name="l00333"></a>00333         ss=(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>()+<span class="stringliteral">"_"</span>+i-&gt;getName();
<a name="l00334"></a>00334         w=hausdorff_2.find(ss);
<a name="l00335"></a>00335         t=i-&gt;getName()+<span class="stringliteral">"_"</span>+(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>();
<a name="l00336"></a>00336         x=hausdorff_2.find(t);
<a name="l00337"></a>00337         <span class="keywordflow">if</span>(w!=hausdorff_2.end())
<a name="l00338"></a>00338         {
<a name="l00339"></a>00339           <span class="comment">// if new separation distance is larger than stored value</span>
<a name="l00340"></a>00340           <span class="keywordflow">if</span>(dd&gt;(*w).second){hausdorff_2[ss]=dd;}
<a name="l00341"></a>00341         }
<a name="l00342"></a>00342         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x!=hausdorff_2.end())
<a name="l00343"></a>00343         {
<a name="l00344"></a>00344           <span class="comment">// if new separation distance is larger than stored value</span>
<a name="l00345"></a>00345           <span class="keywordflow">if</span>(dd&gt;(*x).second){hausdorff_2[t]=dd;}
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347         <span class="keywordflow">else</span>
<a name="l00348"></a>00348         {
<a name="l00349"></a>00349           <span class="comment">// add distance to map</span>
<a name="l00350"></a>00350           hausdorff_2[ss]=dd;
<a name="l00351"></a>00351         }
<a name="l00353"></a>00353         <span class="comment">// if object different from self</span>
<a name="l00354"></a>00354         <span class="keywordflow">if</span>(i-&gt;getName()!=((&amp;(*j))-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>())
<a name="l00355"></a>00355         {
<a name="l00356"></a>00356           vertices_used_noself++;
<a name="l00358"></a>00358           <span class="comment">// if object found in map</span>
<a name="l00359"></a>00359           w=hausdorff_1_noself.find((j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>());
<a name="l00360"></a>00360           <span class="keywordflow">if</span>(w!=hausdorff_1_noself.end())
<a name="l00361"></a>00361           {
<a name="l00362"></a>00362             <span class="comment">// if new separation distance is larger than stored value</span>
<a name="l00363"></a>00363             <span class="keywordflow">if</span>(dd&gt;(*w).second){hausdorff_1_noself[(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>()]=dd;}
<a name="l00364"></a>00364           }
<a name="l00365"></a>00365           <span class="keywordflow">else</span>
<a name="l00366"></a>00366           {
<a name="l00367"></a>00367             <span class="comment">// add distance to map</span>
<a name="l00368"></a>00368             hausdorff_1_noself[(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>()]=dd;
<a name="l00369"></a>00369           }
<a name="l00372"></a>00372           <span class="comment">// if object found in map</span>
<a name="l00373"></a>00373           ss=(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>()+<span class="stringliteral">"_"</span>+i-&gt;getName();
<a name="l00374"></a>00374           w=hausdorff_2_noself.find(ss);
<a name="l00375"></a>00375           t=i-&gt;getName()+<span class="stringliteral">"_"</span>+(j-&gt;getFace())-&gt;<a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">getVertex</a>(0)-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>();
<a name="l00376"></a>00376           x=hausdorff_2_noself.find(t);
<a name="l00377"></a>00377           <span class="keywordflow">if</span>(w!=hausdorff_2_noself.end())
<a name="l00378"></a>00378           {
<a name="l00379"></a>00379             <span class="comment">// if new separation distance is larger than stored value</span>
<a name="l00380"></a>00380             <span class="keywordflow">if</span>(dd&gt;(*w).second){hausdorff_2_noself[ss]=dd;}
<a name="l00381"></a>00381           }
<a name="l00382"></a>00382           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x!=hausdorff_2_noself.end())
<a name="l00383"></a>00383           {
<a name="l00384"></a>00384             <span class="comment">// if new separation distance is larger than stored value</span>
<a name="l00385"></a>00385             <span class="keywordflow">if</span>(dd&gt;(*x).second){hausdorff_2_noself[t]=dd;}
<a name="l00386"></a>00386           }
<a name="l00387"></a>00387           <span class="keywordflow">else</span>
<a name="l00388"></a>00388           {
<a name="l00389"></a>00389             <span class="comment">// add distance to map</span>
<a name="l00390"></a>00390             hausdorff_2_noself[ss]=dd;
<a name="l00391"></a>00391           }
<a name="l00393"></a>00393         }
<a name="l00394"></a>00394       }
<a name="l00395"></a>00395       <span class="keywordflow">else</span>
<a name="l00396"></a>00396       {
<a name="l00397"></a>00397         out_NOCP &lt;&lt; j-&gt;getCoord(0) &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; j-&gt;getCoord(1) &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; j-&gt;getCoord(2) &lt;&lt; <span class="stringliteral">" 1 0 0 1\n"</span>;
<a name="l00398"></a>00398       }
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400     <span class="keywordflow">for</span>(w=hausdorff_1.begin();w!=hausdorff_1.end();w++)
<a name="l00401"></a>00401     {
<a name="l00402"></a>00402       storage_1.push_back((*w).second);
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404     <span class="keywordflow">for</span>(w=hausdorff_2.begin();w!=hausdorff_2.end();w++)
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406       storage_2.push_back((*w).second);
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408     <span class="keywordflow">for</span>(w=hausdorff_1_noself.begin();w!=hausdorff_1_noself.end();w++)
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410       storage_1_noself.push_back((*w).second);
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412     <span class="keywordflow">for</span>(w=hausdorff_2_noself.begin();w!=hausdorff_2_noself.end();w++)
<a name="l00413"></a>00413     {
<a name="l00414"></a>00414       storage_2_noself.push_back((*w).second);
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416   }
<a name="l00417"></a>00417   <span class="comment">// haus1</span>
<a name="l00418"></a>00418   out_haus1 &lt;&lt; <span class="stringliteral">"# One-sided Hausdorff distances\n"</span>
<a name="l00419"></a>00419         &lt;&lt; <span class="stringliteral">"# total_vertices "</span> &lt;&lt; total_vertices
<a name="l00420"></a>00420         &lt;&lt; <span class="stringliteral">", vertices_used "</span> &lt;&lt; vertices_used &lt;&lt; endl;
<a name="l00421"></a>00421   <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#e48600948a78e106d03c76c264304228">d_it</a> i=storage_1.begin();i!=storage_1.end();i++)
<a name="l00422"></a>00422   {
<a name="l00423"></a>00423     out_haus1 &lt;&lt; *i &lt;&lt; endl;
<a name="l00424"></a>00424   }
<a name="l00425"></a>00425   <span class="comment">// haus1</span>
<a name="l00426"></a>00426   <span class="comment">// haus2</span>
<a name="l00427"></a>00427   out_haus2 &lt;&lt; <span class="stringliteral">"# Two-sided Hausdorff distances\n"</span>
<a name="l00428"></a>00428         &lt;&lt; <span class="stringliteral">"# total_vertices "</span> &lt;&lt; total_vertices
<a name="l00429"></a>00429         &lt;&lt; <span class="stringliteral">", vertices_used "</span> &lt;&lt; vertices_used &lt;&lt; endl;
<a name="l00430"></a>00430   <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#e48600948a78e106d03c76c264304228">d_it</a> i=storage_2.begin();i!=storage_2.end();i++)
<a name="l00431"></a>00431   {
<a name="l00432"></a>00432     out_haus2 &lt;&lt; *i &lt;&lt; endl;
<a name="l00433"></a>00433   }
<a name="l00434"></a>00434   <span class="comment">// haus2</span>
<a name="l00435"></a>00435   <span class="comment">// haus1_noself</span>
<a name="l00436"></a>00436   out_haus1_noself &lt;&lt; <span class="stringliteral">"# One-sided Hausdorff distances - no self\n"</span>
<a name="l00437"></a>00437         &lt;&lt; <span class="stringliteral">"# total_vertices "</span> &lt;&lt; total_vertices
<a name="l00438"></a>00438         &lt;&lt; <span class="stringliteral">", vertices_used "</span> &lt;&lt; vertices_used_noself &lt;&lt; endl;
<a name="l00439"></a>00439   <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#e48600948a78e106d03c76c264304228">d_it</a> i=storage_1_noself.begin();i!=storage_1_noself.end();i++)
<a name="l00440"></a>00440   {
<a name="l00441"></a>00441     out_haus1_noself &lt;&lt; *i &lt;&lt; endl;
<a name="l00442"></a>00442   }
<a name="l00443"></a>00443   <span class="comment">// haus1_noself</span>
<a name="l00444"></a>00444   <span class="comment">// haus2_noself</span>
<a name="l00445"></a>00445   out_haus2_noself &lt;&lt; <span class="stringliteral">"# Two-sided Hausdorff distances - no self\n"</span>
<a name="l00446"></a>00446         &lt;&lt; <span class="stringliteral">"# total_vertices "</span> &lt;&lt; total_vertices
<a name="l00447"></a>00447         &lt;&lt; <span class="stringliteral">", vertices_used "</span> &lt;&lt; vertices_used_noself &lt;&lt; endl;
<a name="l00448"></a>00448   <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#e48600948a78e106d03c76c264304228">d_it</a> i=storage_2_noself.begin();i!=storage_2_noself.end();i++)
<a name="l00449"></a>00449   {
<a name="l00450"></a>00450     out_haus2_noself &lt;&lt; *i &lt;&lt; endl;
<a name="l00451"></a>00451   }
<a name="l00452"></a>00452   <span class="comment">// haus2_noself</span>
<a name="l00453"></a>00453   out.close();
<a name="l00454"></a>00454   out_NOCP.close();
<a name="l00455"></a>00455   out_haus1.close();
<a name="l00456"></a>00456   out_haus2.close();
<a name="l00457"></a>00457   out_haus1_noself.close();
<a name="l00458"></a>00458   out_haus2_noself.close();
<a name="l00459"></a>00459   <span class="comment">//cout &lt;&lt; "complete.\n";</span>
<a name="l00460"></a>00460   <span class="comment">//cout.flush();</span>
<a name="l00461"></a>00461 }
<a name="l00462"></a>00462 
<a name="l00463"></a><a class="code" href="classLog.html#2b40ac1a684072ebe0ff13be2f6e638b">00463</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#2b40ac1a684072ebe0ff13be2f6e638b">Log::statusFileInit</a> (<span class="keywordtype">void</span>)
<a name="l00464"></a>00464 {
<a name="l00465"></a>00465   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#35a62859ece63a31e7699bf135beddf9">CONT_LOG_FILE</a>;
<a name="l00466"></a>00466   Cfile.open(file.c_str());
<a name="l00467"></a>00467   Cfile &lt;&lt; <span class="stringliteral">"\nLEGEND_______________________\n"</span>
<a name="l00468"></a>00468         &lt;&lt; <span class="stringliteral">"'Iteration'\n"</span>
<a name="l00469"></a>00469         &lt;&lt; <span class="stringliteral">"0th group is the original data.\n"</span>
<a name="l00470"></a>00470         &lt;&lt; <span class="stringliteral">"For 1st group vertices have moved once or not at all.\n"</span>
<a name="l00471"></a>00471         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00472"></a>00472         &lt;&lt; <span class="stringliteral">"'Nonnice'\n"</span>
<a name="l00473"></a>00473         &lt;&lt; <span class="stringliteral">"Nonnice vertices are inside of another object, possibly the parent object.\n"</span>
<a name="l00474"></a>00474         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00475"></a>00475         &lt;&lt; <span class="stringliteral">"'Self-Nonnice'\n"</span>
<a name="l00476"></a>00476         &lt;&lt; <span class="stringliteral">"Self-nonnice vertices are inside of their parent object.\n"</span>
<a name="l00477"></a>00477         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00478"></a>00478         &lt;&lt; <span class="stringliteral">"'Int. Faces'\n"</span>
<a name="l00479"></a>00479         &lt;&lt; <span class="stringliteral">"Total number of pairs of intersecting faces in all objects.\n"</span>
<a name="l00480"></a>00480         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00481"></a>00481         &lt;&lt; <span class="stringliteral">"'Self-Int. Faces'\n"</span>
<a name="l00482"></a>00482         &lt;&lt; <span class="stringliteral">"Number of pairs of self-intersecting faces, i.e. faces share a common parent object.\n"</span>
<a name="l00483"></a>00483         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00484"></a>00484         &lt;&lt; <span class="stringliteral">"'Force'\n"</span>
<a name="l00485"></a>00485         &lt;&lt; <span class="stringliteral">"Cumulative force on all vertices in all objects.\n"</span>
<a name="l00486"></a>00486         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00487"></a>00487         &lt;&lt; <span class="stringliteral">"'Energy'\n"</span>
<a name="l00488"></a>00488         &lt;&lt; <span class="stringliteral">"Cumulative potential energy in all vertices in all objects.\n"</span>
<a name="l00489"></a>00489         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00490"></a>00490         &lt;&lt; <span class="stringliteral">"'Mean Disp.'\n"</span>
<a name="l00491"></a>00491         &lt;&lt; <span class="stringliteral">"Mean displacement of all vertices in all objects chosen to move during the group.\n"</span>
<a name="l00492"></a>00492         &lt;&lt; <span class="stringliteral">"--\n"</span>
<a name="l00493"></a>00493         &lt;&lt; <span class="stringliteral">"'Min. Edge Angle (rad.)'\n"</span>
<a name="l00494"></a>00494         &lt;&lt; <span class="stringliteral">"The minimum edge angle of all edges in all objects.\n"</span>
<a name="l00495"></a>00495         &lt;&lt; <span class="stringliteral">"Minimum edge angle is the angle between the two faces that share the edge.\n"</span>
<a name="l00496"></a>00496         &lt;&lt; <span class="stringliteral">"___________________________________________\n\n\n\n"</span>;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498   Cfile &lt;&lt; <span class="stringliteral">"I            S\n"</span>;
<a name="l00499"></a>00499   Cfile &lt;&lt; <span class="stringliteral">"t            .\n"</span>;
<a name="l00500"></a>00500   Cfile &lt;&lt; <span class="stringliteral">"e            n            S\n"</span>;
<a name="l00501"></a>00501   Cfile &lt;&lt; <span class="stringliteral">"r            o            .\n"</span>;
<a name="l00502"></a>00502   Cfile &lt;&lt; <span class="stringliteral">"a            n            F\n"</span>;
<a name="l00503"></a>00503   Cfile &lt;&lt; <span class="stringliteral">"t            n            a\n"</span>;
<a name="l00504"></a>00504   Cfile &lt;&lt; <span class="stringliteral">"i            i            c\n"</span>;
<a name="l00505"></a>00505   Cfile &lt;&lt; <span class="stringliteral">"o            c            e\n"</span>;
<a name="l00506"></a>00506   Cfile &lt;&lt; <span class="stringliteral">"n   Nonnice  e   I.Faces  s   "</span>;
<a name="l00507"></a>00507   Cfile.width(10);
<a name="l00508"></a>00508   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"N"</span>;
<a name="l00509"></a>00509   Cfile.width(10);
<a name="l00510"></a>00510   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"Max Gain"</span>;
<a name="l00511"></a>00511   Cfile.width(16);
<a name="l00512"></a>00512   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"Energy"</span>;
<a name="l00513"></a>00513   Cfile.width(11);
<a name="l00514"></a>00514   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"Disp_Mean"</span>;
<a name="l00515"></a>00515   Cfile.width(15);
<a name="l00516"></a>00516   Cfile &lt;&lt; right &lt;&lt; <span class="stringliteral">"Disp_Min"</span>;
<a name="l00517"></a>00517   Cfile.width(1);
<a name="l00518"></a>00518   Cfile &lt;&lt; <span class="stringliteral">":"</span>;
<a name="l00519"></a>00519   Cfile.width(15);
<a name="l00520"></a>00520   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"Disp_Max"</span>;
<a name="l00521"></a>00521   Cfile.width(19);
<a name="l00522"></a>00522   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"MinEdgeAngle(deg)"</span>;
<a name="l00523"></a>00523   Cfile.width(13);
<a name="l00524"></a>00524   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"Duration(sec)"</span> &lt;&lt; endl;
<a name="l00525"></a>00525   Cfile.flush();
<a name="l00526"></a>00526 }
<a name="l00527"></a>00527 
<a name="l00528"></a><a class="code" href="classLog.html#c6bb49769a762f4927fefa8ccebcbcb3">00528</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#c6bb49769a762f4927fefa8ccebcbcb3">Log::fileOutit</a> (<span class="keywordtype">void</span>)
<a name="l00529"></a>00529 {
<a name="l00530"></a>00530   Cfile.close();
<a name="l00531"></a>00531   Mfile.close();
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00534"></a><a class="code" href="classLog.html#9198a9cc319d1364734bfe7304c269cf">00534</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#9198a9cc319d1364734bfe7304c269cf">Log::updateFile</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group,<span class="keywordtype">bool</span> flag,<span class="keywordtype">double</span> elapsed_time)
<a name="l00535"></a>00535 {
<a name="l00536"></a>00536   <span class="keywordflow">if</span>(group==0)
<a name="l00537"></a>00537   {
<a name="l00538"></a>00538     cout &lt;&lt; <span class="stringliteral">"Update log files..............................."</span>;
<a name="l00539"></a>00539   }
<a name="l00540"></a>00540   <span class="keywordflow">else</span>
<a name="l00541"></a>00541   {
<a name="l00542"></a>00542     cout &lt;&lt; <span class="stringliteral">"Iteration "</span> &lt;&lt; group &lt;&lt; <span class="stringliteral">": "</span>;
<a name="l00543"></a>00543     cout &lt;&lt; <span class="stringliteral">"Update log files..............................."</span>;
<a name="l00544"></a>00544   }
<a name="l00545"></a>00545   cout.flush();
<a name="l00546"></a>00546   Cfile.precision(10);
<a name="l00547"></a>00547   Cfile.width(4);
<a name="l00548"></a>00548   Cfile &lt;&lt; left &lt;&lt; group;
<a name="l00549"></a>00549   Cfile.width(9);
<a name="l00550"></a>00550   Cfile &lt;&lt; left &lt;&lt; <a class="code" href="classNice.html#0e7a8f2b7f6c9e5a41b4f0a106a7614e">Nice::instance</a>().<a class="code" href="classNice.html#240dbc4371a3b6931b38dda59bd827a0">getNonniceCount</a>(<span class="keyword">false</span>); <span class="comment">// all nonnice</span>
<a name="l00551"></a>00551   Cfile.width(4);
<a name="l00552"></a>00552   Cfile &lt;&lt; left &lt;&lt; <a class="code" href="classNice.html#0e7a8f2b7f6c9e5a41b4f0a106a7614e">Nice::instance</a>().<a class="code" href="classNice.html#240dbc4371a3b6931b38dda59bd827a0">getNonniceCount</a>(<span class="keyword">true</span>);  <span class="comment">// nonnince to self</span>
<a name="l00553"></a>00553   Cfile.width(9);
<a name="l00554"></a>00554   Cfile &lt;&lt; left &lt;&lt; <a class="code" href="classIntersecting__Faces.html#8ccec8bb3cfc50e4ad98ff13c1f8ec8f">Intersecting_Faces::instance</a>().<a class="code" href="classIntersecting__Faces.html#a1a58bcebe21681324ab18ac410383b2">getCountOfIntFaces</a>(<span class="keyword">false</span>);
<a name="l00555"></a>00555   Cfile.width(4);
<a name="l00556"></a>00556   Cfile &lt;&lt; left &lt;&lt; <a class="code" href="classIntersecting__Faces.html#8ccec8bb3cfc50e4ad98ff13c1f8ec8f">Intersecting_Faces::instance</a>().<a class="code" href="classIntersecting__Faces.html#a1a58bcebe21681324ab18ac410383b2">getCountOfIntFaces</a>(<span class="keyword">true</span>);
<a name="l00557"></a>00557   Cfile.precision(8);
<a name="l00558"></a>00558   Cfile.width(10);
<a name="l00559"></a>00559   Cfile &lt;&lt; left &lt;&lt; N;
<a name="l00560"></a>00560   Cfile.width(10);
<a name="l00561"></a>00561   Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"NA"</span>;
<a name="l00562"></a>00562   Cfile.width(16);
<a name="l00563"></a>00563   Cfile &lt;&lt; left &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#9d1764072b7c90f9bab7b2744095a361">getEnergy</a>();
<a name="l00564"></a>00564   <span class="keywordflow">if</span> (!flag)
<a name="l00565"></a>00565   {
<a name="l00566"></a>00566     Cfile.width(11);
<a name="l00567"></a>00567     Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"NA"</span>;
<a name="l00568"></a>00568     Cfile.width(15);
<a name="l00569"></a>00569     Cfile &lt;&lt; right &lt;&lt; <span class="stringliteral">"NA"</span>;
<a name="l00570"></a>00570     Cfile.width(1);
<a name="l00571"></a>00571     Cfile &lt;&lt; <span class="stringliteral">":"</span>;
<a name="l00572"></a>00572     Cfile.width(15);
<a name="l00573"></a>00573     Cfile &lt;&lt; left &lt;&lt; <span class="stringliteral">"NA"</span>;
<a name="l00574"></a>00574   }
<a name="l00575"></a>00575   <span class="keywordflow">else</span>
<a name="l00576"></a>00576   {
<a name="l00577"></a>00577     Cfile.width(11);
<a name="l00578"></a>00578     Cfile &lt;&lt; left &lt;&lt; md[1];
<a name="l00579"></a>00579     Cfile.width(15);
<a name="l00580"></a>00580     <span class="keywordtype">char</span> name[1024];
<a name="l00581"></a>00581     sprintf(name,<span class="stringliteral">"%.6g"</span>,d_min);
<a name="l00582"></a>00582     Cfile &lt;&lt; right &lt;&lt; name;
<a name="l00583"></a>00583     Cfile.width(1);
<a name="l00584"></a>00584     Cfile &lt;&lt; <span class="stringliteral">":"</span>;
<a name="l00585"></a>00585     Cfile.width(15);
<a name="l00586"></a>00586     sprintf(name,<span class="stringliteral">"%.6g"</span>,d_max);
<a name="l00587"></a>00587     Cfile &lt;&lt; left &lt;&lt; name;
<a name="l00588"></a>00588   }
<a name="l00589"></a>00589   Cfile.precision(10);
<a name="l00590"></a>00590   Cfile.width(19);
<a name="l00591"></a>00591   Cfile &lt;&lt; left &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#05aadd9612e660c318188c1bb6d08168">getMinEdgeAngle</a>()*180.0/<a class="code" href="controls_8h.html#952eac791b596a61bba0a133a3bb439f">PI</a>;
<a name="l00592"></a>00592   Cfile.width(13);
<a name="l00593"></a>00593   Cfile.precision(4);
<a name="l00594"></a>00594   Cfile &lt;&lt; left &lt;&lt; elapsed_time &lt;&lt; endl;
<a name="l00595"></a>00595   Cfile.flush();
<a name="l00596"></a>00596   cout &lt;&lt; <span class="stringliteral">"complete.\n"</span>;
<a name="l00597"></a>00597   cout.flush();
<a name="l00598"></a>00598 }
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="classLog.html#6196328a2b244940b90e0931c975be0d">00600</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#6196328a2b244940b90e0931c975be0d">Log::writeObjectData</a> (<span class="keywordtype">void</span>)
<a name="l00601"></a>00601 {
<a name="l00602"></a>00602   cout &lt;&lt; <span class="stringliteral">"Writing object data to log files..............."</span>;
<a name="l00603"></a>00603   cout.flush();
<a name="l00604"></a>00604   <a class="code" href="classLog.html#1886bc499dbcb83a87e29c31c6aad6b3">writeObjectList</a>();
<a name="l00605"></a>00605   <a class="code" href="classLog.html#2b40ac1a684072ebe0ff13be2f6e638b">statusFileInit</a>();
<a name="l00606"></a>00606   cout &lt;&lt; <span class="stringliteral">"complete.\n"</span>;
<a name="l00607"></a>00607   cout.flush();
<a name="l00608"></a>00608 }
<a name="l00609"></a>00609 
<a name="l00610"></a><a class="code" href="classLog.html#1886bc499dbcb83a87e29c31c6aad6b3">00610</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#1886bc499dbcb83a87e29c31c6aad6b3">Log::writeObjectList</a> (<span class="keywordtype">void</span>)
<a name="l00611"></a>00611 {
<a name="l00612"></a>00612   <span class="comment">//char file[FILENAME_SIZE];</span>
<a name="l00613"></a>00613   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> file;
<a name="l00614"></a>00614   <span class="comment">// open file</span>
<a name="l00615"></a>00615   file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#32345c2dace79fac5d50191045acb67f">OBJECT_LIST_FILE</a>;
<a name="l00616"></a>00616   Olist.open(file.c_str());
<a name="l00617"></a>00617   <span class="comment">// add stuff</span>
<a name="l00618"></a>00618   Olist &lt;&lt; <span class="stringliteral">"Input data directory = "</span> &lt;&lt; <a class="code" href="controls_8h.html#d7eed0bcd28857c669c4547634152a2b">INPUT_DATA_DIR</a> &lt;&lt; <span class="stringliteral">"\n"</span>
<a name="l00619"></a>00619         &lt;&lt; <span class="stringliteral">"Total number of input files = "</span> &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#b5b53af75606a8358b48efdea451227f">getFileCount</a>() &lt;&lt; <span class="stringliteral">"\n"</span>
<a name="l00620"></a>00620         &lt;&lt; <span class="stringliteral">"Total number of (objects, vertices, faces, edges) = ("</span> 
<a name="l00621"></a>00621         &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#c3ac0ef8e13fb01215064cd9bd24ff85">o</a>.size() &lt;&lt; <span class="stringliteral">","</span>
<a name="l00622"></a>00622         &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#31f05695581593644aafa457cc2b2bc8">getVertexCount</a>() &lt;&lt; <span class="stringliteral">","</span>
<a name="l00623"></a>00623         &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#570049d28d9b59a6b314fdbe9978f056">getFaceCount</a>() &lt;&lt; <span class="stringliteral">","</span>
<a name="l00624"></a>00624         &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#c805cd419c41dbc672b081b88bcb6552">getEdgeCount</a>() &lt;&lt; <span class="stringliteral">")\n\n"</span>;
<a name="l00625"></a>00625   Olist.width(15);
<a name="l00626"></a>00626   Olist &lt;&lt; left &lt;&lt; <span class="stringliteral">"Object name"</span>;       
<a name="l00627"></a>00627   Olist.width(15);
<a name="l00628"></a>00628   Olist &lt;&lt; left &lt;&lt; <span class="stringliteral">"#vertices"</span>;
<a name="l00629"></a>00629   Olist.width(15);
<a name="l00630"></a>00630   Olist &lt;&lt; left &lt;&lt; <span class="stringliteral">"#faces"</span>;
<a name="l00631"></a>00631   Olist.width(15);
<a name="l00632"></a>00632   Olist &lt;&lt; left &lt;&lt; <span class="stringliteral">"#edges"</span> &lt;&lt; endl;
<a name="l00633"></a>00633 
<a name="l00634"></a>00634   <span class="comment">// for each object, write name and index</span>
<a name="l00635"></a>00635   <span class="keywordflow">for</span> (<a class="code" href="meshmorph_8h.html#bc066bbbef7a11c4ee8fa91ec325d609">o_cit</a> i=<a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().o.begin();i!=<a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#c3ac0ef8e13fb01215064cd9bd24ff85">o</a>.end();i++)
<a name="l00636"></a>00636   {
<a name="l00637"></a>00637     Olist.width(15);
<a name="l00638"></a>00638     Olist &lt;&lt; left &lt;&lt; i-&gt;getName();
<a name="l00639"></a>00639     Olist.width(15);
<a name="l00640"></a>00640     Olist &lt;&lt; left &lt;&lt; i-&gt;v.size();
<a name="l00641"></a>00641     Olist.width(15);
<a name="l00642"></a>00642     Olist &lt;&lt; left &lt;&lt; i-&gt;f.size();
<a name="l00643"></a>00643     Olist.width(15);
<a name="l00644"></a>00644     Olist &lt;&lt; left &lt;&lt; i-&gt;e.size() &lt;&lt; endl;
<a name="l00645"></a>00645   }
<a name="l00646"></a>00646   Olist.close();
<a name="l00647"></a>00647 }
<a name="l00648"></a>00648 
<a name="l00649"></a><a class="code" href="classLog.html#f559bf13dc4c7419c7a248f05a7ce5f5">00649</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#f559bf13dc4c7419c7a248f05a7ce5f5">Log::updateStats</a> (<span class="keywordtype">double</span> d)
<a name="l00650"></a>00650 {
<a name="l00651"></a>00651   <span class="keywordflow">if</span>(d)
<a name="l00652"></a>00652   {
<a name="l00653"></a>00653     N++;
<a name="l00654"></a>00654     md[0]=md[1];
<a name="l00655"></a>00655     md[1]=md[0]*(N-1)/N+d/N;
<a name="l00656"></a>00656     <span class="keywordflow">if</span>(d&lt;d_min){d_min=d;}
<a name="l00657"></a>00657     <span class="keywordflow">if</span>(d&gt;d_max){d_max=d;}
<a name="l00658"></a>00658   }
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 
<a name="l00661"></a><a class="code" href="classLog.html#b9a9ee2553ef9a26e303b91b37bf26bf">00661</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#b9a9ee2553ef9a26e303b91b37bf26bf">Log::clearVals</a> (<span class="keywordtype">void</span>)
<a name="l00662"></a>00662 {
<a name="l00663"></a>00663   N=0;                  <span class="comment">// count of moved vertices</span>
<a name="l00664"></a>00664   md[0]=md[1]=0;        <span class="comment">// mean displacement of N moved vertices</span>
<a name="l00665"></a>00665   d_min=1E30;           <span class="comment">// min displacement of N moved vertices</span>
<a name="l00666"></a>00666   d_max=-1E30;  <span class="comment">// max displacement of N moved vertices</span>
<a name="l00667"></a>00667 }
<a name="l00668"></a>00668 
<a name="l00669"></a><a class="code" href="classLog.html#e2a6286541ce3e604dc7d8be60cdbb37">00669</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#e2a6286541ce3e604dc7d8be60cdbb37">Log::writeFiles</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l00670"></a>00670 {
<a name="l00671"></a>00671  <span class="keywordflow">if</span> (<a class="code" href="controls_8h.html#cf6452cec0b2484cbe8de17c06e47d45">WRITE_MESH_EVERY_ITERATION</a>)
<a name="l00672"></a>00672   {
<a name="l00673"></a>00673     cout &lt;&lt; <span class="stringliteral">"Iteration "</span> &lt;&lt; group &lt;&lt; <span class="stringliteral">": "</span>;
<a name="l00674"></a>00674     cout &lt;&lt; <span class="stringliteral">"Build Mesh after..............................."</span>;
<a name="l00675"></a>00675     cout.flush();
<a name="l00676"></a>00676     <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#63e4a77b0a4d2e57333342b3aad89c8a">writeMeshData</a>(group);
<a name="l00677"></a>00677     cout &lt;&lt; <span class="stringliteral">"complete.\n"</span>;
<a name="l00678"></a>00678     cout.flush();
<a name="l00679"></a>00679   }
<a name="l00680"></a>00680   <span class="keywordflow">if</span>(<a class="code" href="controls_8h.html#5dd7ff055a5ec5403a68c010961b6a97">WRITE_PUNISHED_VERTICES_TO_FILE</a>)
<a name="l00681"></a>00681   {
<a name="l00682"></a>00682     cout &lt;&lt; <span class="stringliteral">"Iteration "</span> &lt;&lt; group &lt;&lt; <span class="stringliteral">": "</span>;
<a name="l00683"></a>00683     cout &lt;&lt; <span class="stringliteral">"Write punished vertices........................"</span>;
<a name="l00684"></a>00684     cout.flush();
<a name="l00685"></a>00685     <a class="code" href="classLog.html#6d88c46ba6ab1429f3eafb3c5334f2ea">writePunished</a>(group);
<a name="l00686"></a>00686     cout &lt;&lt; <span class="stringliteral">"complete.\n"</span>;
<a name="l00687"></a>00687     cout.flush();
<a name="l00688"></a>00688   }
<a name="l00689"></a>00689   <span class="keywordflow">if</span>(<a class="code" href="controls_8h.html#c11014d69b0c0db4a9ee9d37ceb01504">WRITE_INTERSECTED_FACES_TO_FILE</a>)
<a name="l00690"></a>00690   {
<a name="l00691"></a>00691     cout &lt;&lt; <span class="stringliteral">"Iteration "</span> &lt;&lt; group &lt;&lt; <span class="stringliteral">": "</span>;
<a name="l00692"></a>00692     cout &lt;&lt; <span class="stringliteral">"Write intersected faces........................"</span>;
<a name="l00693"></a>00693     cout.flush();
<a name="l00694"></a>00694     <a class="code" href="classLog.html#b563f97faf3eba2010a471f8bec54165">writeIntersected</a>(group);
<a name="l00695"></a>00695     cout &lt;&lt; <span class="stringliteral">"complete.\n"</span>;
<a name="l00696"></a>00696     cout.flush();
<a name="l00697"></a>00697   }
<a name="l00698"></a>00698   <span class="keywordflow">if</span>(<a class="code" href="controls_8h.html#026091be773d643a66c81f12c0de305b">WRITE_NONNICE_VERTICES_TO_FILE</a>)
<a name="l00699"></a>00699   {
<a name="l00700"></a>00700     cout &lt;&lt; <span class="stringliteral">"Iteration "</span> &lt;&lt; group &lt;&lt; <span class="stringliteral">": "</span>;
<a name="l00701"></a>00701     cout &lt;&lt; <span class="stringliteral">"Write nonnice vertices........................."</span>;
<a name="l00702"></a>00702     cout.flush();
<a name="l00703"></a>00703     <a class="code" href="classLog.html#9c23adcdf946de56e7f8f9876d08a7ac">writeNonnice</a>(group);
<a name="l00704"></a>00704     cout &lt;&lt; <span class="stringliteral">"complete.\n"</span>;
<a name="l00705"></a>00705     cout.flush();
<a name="l00706"></a>00706   }
<a name="l00707"></a>00707 
<a name="l00708"></a>00708   gettimeofday(&amp;tim,NULL);
<a name="l00709"></a>00709   <span class="keywordtype">double</span> t2=tim.tv_sec+(tim.tv_usec/1000000.0);
<a name="l00710"></a>00710   <a class="code" href="classLog.html#9198a9cc319d1364734bfe7304c269cf">updateFile</a>(group,<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getNumMovedVertsGroup()&gt;1,t2-t1);
<a name="l00711"></a>00711   <span class="keywordflow">if</span> (<a class="code" href="controls_8h.html#4645b751c3b0790506b0bb5db0eb2ce8">WRITE_DISTANCES_EVERY_ITERATION</a>)
<a name="l00712"></a>00712   {
<a name="l00713"></a>00713     cout &lt;&lt; <span class="stringliteral">"Iteration "</span> &lt;&lt; group &lt;&lt; <span class="stringliteral">": "</span>;
<a name="l00714"></a>00714     cout &lt;&lt; <span class="stringliteral">"Write vertex separation distances.............."</span>;
<a name="l00715"></a>00715     cout.flush();
<a name="l00716"></a>00716     <a class="code" href="classLog.html#d67a7a57460b120606507882388c1c7b">writeSepDistances</a>(group);
<a name="l00717"></a>00717     cout &lt;&lt; <span class="stringliteral">"complete.\n"</span>;
<a name="l00718"></a>00718     cout.flush();
<a name="l00719"></a>00719   }
<a name="l00720"></a>00720 }
<a name="l00721"></a>00721 
<a name="l00722"></a><a class="code" href="classLog.html#9c23adcdf946de56e7f8f9876d08a7ac">00722</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#9c23adcdf946de56e7f8f9876d08a7ac">Log::writeNonnice</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l00723"></a>00723 {
<a name="l00724"></a>00724   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> file;
<a name="l00725"></a>00725   <span class="comment">// create output filename</span>
<a name="l00726"></a>00726   <span class="keywordflow">if</span> (<a class="code" href="controls_8h.html#6c7cfe1944c446ba4115710469c497fd">APPEND_ITERATION_NUMBER_TO_MESH</a>)
<a name="l00727"></a>00727   {
<a name="l00728"></a>00728     <span class="keywordtype">char</span> sint[128];
<a name="l00729"></a>00729     sprintf(sint,<span class="stringliteral">".%i"</span>,group);
<a name="l00730"></a>00730     <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> line(sint);
<a name="l00731"></a>00731     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#756192d1a8575ea130503c4b6aa2f28e">NONNICE_FILE</a> + line;
<a name="l00732"></a>00732   }
<a name="l00733"></a>00733   <span class="keywordflow">else</span>
<a name="l00734"></a>00734   {
<a name="l00735"></a>00735     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#756192d1a8575ea130503c4b6aa2f28e">NONNICE_FILE</a>;
<a name="l00736"></a>00736   }
<a name="l00737"></a>00737   <span class="comment">// open output file</span>
<a name="l00738"></a>00738   std::ofstream newfile (file.c_str(),std::ios::out);
<a name="l00739"></a>00739   <span class="keywordflow">if</span>(newfile.is_open())
<a name="l00740"></a>00740   {
<a name="l00741"></a>00741     <span class="comment">// create vector set</span>
<a name="l00742"></a>00742     <a class="code" href="meshmorph_8h.html#f53009c47e4e310b71887703aee4ec17">v_set</a> vs;
<a name="l00743"></a>00743     <span class="comment">// for each nonnice hashtable element in object</span>
<a name="l00744"></a>00744     <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#37680d6b8f28499a1aee927e43cb33c1">vhm_cit</a> j=<a class="code" href="classNice.html#0e7a8f2b7f6c9e5a41b4f0a106a7614e">Nice::instance</a>().beginNice();j!=<a class="code" href="classNice.html#0e7a8f2b7f6c9e5a41b4f0a106a7614e">Nice::instance</a>().<a class="code" href="classNice.html#400a9465e49d8fcf1339d28eadc2fd1e">endNice</a>();j++)
<a name="l00745"></a>00745     {
<a name="l00746"></a>00746       <span class="comment">// add vertex* to set</span>
<a name="l00747"></a>00747       vs.insert((*j).first);
<a name="l00748"></a>00748     }
<a name="l00749"></a>00749     <span class="comment">// vector set was collected</span>
<a name="l00750"></a>00750     <span class="comment">// if cp</span>
<a name="l00751"></a>00751     <span class="keywordflow">if</span>(<span class="stringliteral">"FORMAT_NONNICE_VERTICES"</span>==<span class="stringliteral">"cp"</span>)
<a name="l00752"></a>00752     {
<a name="l00753"></a>00753       <span class="comment">// print header</span>
<a name="l00754"></a>00754       newfile &lt;&lt; <span class="stringliteral">"x_coordinate y_coordinate z_coordinate "</span>
<a name="l00755"></a>00755             &lt;&lt; <span class="stringliteral">"state_value x_normal y_normal z_normal\n"</span>;
<a name="l00756"></a>00756       <span class="comment">// for each vertex in set</span>
<a name="l00757"></a>00757       newfile.precision(12);
<a name="l00758"></a>00758       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#6a736ea70531f4c1ebd26c9551894045">vs_it</a> i=vs.begin();i!=vs.end();i++)
<a name="l00759"></a>00759       {
<a name="l00760"></a>00760         <span class="comment">// print vertex</span>
<a name="l00761"></a>00761         (*i)-&gt;printCP(newfile);
<a name="l00762"></a>00762       }
<a name="l00763"></a>00763     }
<a name="l00764"></a>00764     <span class="keywordflow">else</span>
<a name="l00765"></a>00765     { <span class="comment">// else detail</span>
<a name="l00766"></a>00766       newfile.precision(12);
<a name="l00767"></a>00767       <span class="comment">// for each vertex in set</span>
<a name="l00768"></a>00768       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#6a736ea70531f4c1ebd26c9551894045">vs_it</a> i=vs.begin();i!=vs.end();i++)
<a name="l00769"></a>00769       {
<a name="l00770"></a>00770         <span class="comment">// print vertex</span>
<a name="l00771"></a>00771         (*i)-&gt;print(newfile);
<a name="l00772"></a>00772       }
<a name="l00773"></a>00773     }
<a name="l00774"></a>00774     newfile.close();
<a name="l00775"></a>00775   }
<a name="l00776"></a>00776 }
<a name="l00777"></a>00777 
<a name="l00778"></a><a class="code" href="classLog.html#b563f97faf3eba2010a471f8bec54165">00778</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#b563f97faf3eba2010a471f8bec54165">Log::writeIntersected</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l00779"></a>00779 {
<a name="l00780"></a>00780   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> file;
<a name="l00781"></a>00781   <span class="comment">// create output filename</span>
<a name="l00782"></a>00782   <span class="keywordflow">if</span> (<a class="code" href="controls_8h.html#6c7cfe1944c446ba4115710469c497fd">APPEND_ITERATION_NUMBER_TO_MESH</a>)
<a name="l00783"></a>00783   {
<a name="l00784"></a>00784     <span class="keywordtype">char</span> sint[128];
<a name="l00785"></a>00785     sprintf(sint,<span class="stringliteral">".%i"</span>,group);
<a name="l00786"></a>00786     <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> line(sint);
<a name="l00787"></a>00787     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#10da0f21c15539c3b3450f4ae8bc13ce">INTERSECTED_FILE</a> + line;
<a name="l00788"></a>00788   }
<a name="l00789"></a>00789   <span class="keywordflow">else</span>
<a name="l00790"></a>00790   {
<a name="l00791"></a>00791     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#10da0f21c15539c3b3450f4ae8bc13ce">INTERSECTED_FILE</a>;
<a name="l00792"></a>00792   }
<a name="l00793"></a>00793   <span class="comment">// open output file</span>
<a name="l00794"></a>00794   std::ofstream newfile (file.c_str(),std::ios::out);
<a name="l00795"></a>00795   <span class="keywordflow">if</span>(newfile.is_open())
<a name="l00796"></a>00796   {
<a name="l00797"></a>00797     <span class="comment">// if cp</span>
<a name="l00798"></a>00798     <span class="keywordflow">if</span>(<span class="stringliteral">"FORMAT_INTERSECTED_FACES"</span>==<span class="stringliteral">"cp"</span>)
<a name="l00799"></a>00799     {
<a name="l00800"></a>00800       <span class="comment">// create vector set</span>
<a name="l00801"></a>00801       <a class="code" href="meshmorph_8h.html#f53009c47e4e310b71887703aee4ec17">v_set</a> vs;
<a name="l00802"></a>00802       <span class="comment">// for each intersected hashtable element in object</span>
<a name="l00803"></a>00803       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#d54c98d3b6edd701bc42d29ceb0aca87">htff_cit</a> j=<a class="code" href="classIntersecting__Faces.html#8ccec8bb3cfc50e4ad98ff13c1f8ec8f">Intersecting_Faces::instance</a>().begin();j!=<a class="code" href="classIntersecting__Faces.html#8ccec8bb3cfc50e4ad98ff13c1f8ec8f">Intersecting_Faces::instance</a>().<a class="code" href="classIntersecting__Faces.html#5d2b8047ec822cad682ac0bdfff3b0d2">end</a>();j++)
<a name="l00804"></a>00804       {
<a name="l00805"></a>00805         <span class="comment">// grab Face *key</span>
<a name="l00806"></a>00806         <a class="code" href="classFace.html">Face</a> *ff=(*j).first;
<a name="l00807"></a>00807         <span class="comment">// for each vertex of Face* key</span>
<a name="l00808"></a>00808         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;3;k++)
<a name="l00809"></a>00809         {
<a name="l00810"></a>00810           <span class="comment">// add vertex* to set</span>
<a name="l00811"></a>00811           vs.insert(ff-&gt;getVertex(k));
<a name="l00812"></a>00812         }
<a name="l00813"></a>00813         <span class="comment">// for each Face* in vector</span>
<a name="l00814"></a>00814         <span class="keyword">const</span> <a class="code" href="meshmorph_8h.html#1f34905de522641c355a51fe9e3f1149">vec_fp</a> *fv=&amp;(*j).second;
<a name="l00815"></a>00815         <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#8d2bcc70fbd9a2cca7eecb128703e8c7">fp_cit</a> k=fv-&gt;begin();k!=fv-&gt;end();k++)
<a name="l00816"></a>00816         {
<a name="l00817"></a>00817           <span class="comment">// for each vertex of Face*</span>
<a name="l00818"></a>00818           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> nn=0;nn&lt;3;nn++)
<a name="l00819"></a>00819           {
<a name="l00820"></a>00820             <span class="comment">// add vertex* to set</span>
<a name="l00821"></a>00821             vs.insert((*k)-&gt;getVertex(nn));
<a name="l00822"></a>00822           }
<a name="l00823"></a>00823         }
<a name="l00824"></a>00824       }
<a name="l00825"></a>00825       <span class="comment">// vector set was collected</span>
<a name="l00826"></a>00826       <span class="comment">// print header</span>
<a name="l00827"></a>00827       newfile &lt;&lt; <span class="stringliteral">"x_coordinate y_coordinate z_coordinate "</span>
<a name="l00828"></a>00828             &lt;&lt; <span class="stringliteral">"state_value x_normal y_normal z_normal\n"</span>;
<a name="l00829"></a>00829       <span class="comment">// for each vertex in set</span>
<a name="l00830"></a>00830       newfile.precision(12);
<a name="l00831"></a>00831       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#6a736ea70531f4c1ebd26c9551894045">vs_it</a> i=vs.begin();i!=vs.end();i++)
<a name="l00832"></a>00832       {
<a name="l00833"></a>00833         <span class="comment">// print vertex</span>
<a name="l00834"></a>00834         (*i)-&gt;printCP(newfile);
<a name="l00835"></a>00835       }
<a name="l00836"></a>00836     }
<a name="l00837"></a>00837     <span class="keywordflow">else</span>
<a name="l00838"></a>00838     { <span class="comment">// else detail</span>
<a name="l00839"></a>00839       <span class="comment">// create face set</span>
<a name="l00840"></a>00840       <a class="code" href="meshmorph_8h.html#18c3a5c9149f71028e8356a5f59979c1">f_set</a> ffs;
<a name="l00841"></a>00841       <span class="comment">// for each intersected hashtable element</span>
<a name="l00842"></a>00842       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#d54c98d3b6edd701bc42d29ceb0aca87">htff_cit</a> j=<a class="code" href="classIntersecting__Faces.html#8ccec8bb3cfc50e4ad98ff13c1f8ec8f">Intersecting_Faces::instance</a>().begin();j!=<a class="code" href="classIntersecting__Faces.html#8ccec8bb3cfc50e4ad98ff13c1f8ec8f">Intersecting_Faces::instance</a>().<a class="code" href="classIntersecting__Faces.html#5d2b8047ec822cad682ac0bdfff3b0d2">end</a>();j++)
<a name="l00843"></a>00843       {
<a name="l00844"></a>00844         <span class="comment">// add Face* to set</span>
<a name="l00845"></a>00845         ffs.insert((*j).first);
<a name="l00846"></a>00846         <span class="comment">// for each Face* in vector</span>
<a name="l00847"></a>00847         <span class="keyword">const</span> <a class="code" href="meshmorph_8h.html#1f34905de522641c355a51fe9e3f1149">vec_fp</a> *fv=&amp;(*j).second;
<a name="l00848"></a>00848         <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#8d2bcc70fbd9a2cca7eecb128703e8c7">fp_cit</a> k=fv-&gt;begin();k!=fv-&gt;end();k++)
<a name="l00849"></a>00849         {
<a name="l00850"></a>00850           <span class="comment">// add Face* to set</span>
<a name="l00851"></a>00851           ffs.insert(*k);
<a name="l00852"></a>00852         }
<a name="l00853"></a>00853       }
<a name="l00854"></a>00854       <span class="comment">// face set was collected</span>
<a name="l00855"></a>00855       newfile.precision(12);
<a name="l00856"></a>00856       <span class="comment">// for each face in set</span>
<a name="l00857"></a>00857       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#ac3d66c96f82288309b43040bf91b2d0">fs_it</a> i=ffs.begin();i!=ffs.end();i++)
<a name="l00858"></a>00858       {
<a name="l00859"></a>00859         <span class="comment">// print face</span>
<a name="l00860"></a>00860         (*i)-&gt;print(newfile);
<a name="l00861"></a>00861       }
<a name="l00862"></a>00862     }
<a name="l00863"></a>00863     newfile.close();
<a name="l00864"></a>00864   }
<a name="l00865"></a>00865 }
<a name="l00866"></a>00866 
<a name="l00867"></a><a class="code" href="classLog.html#6d88c46ba6ab1429f3eafb3c5334f2ea">00867</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#6d88c46ba6ab1429f3eafb3c5334f2ea">Log::writePunished</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l00868"></a>00868 {
<a name="l00869"></a>00869   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> file;
<a name="l00870"></a>00870   <span class="comment">// create output filename</span>
<a name="l00871"></a>00871   <span class="keywordflow">if</span> (<a class="code" href="controls_8h.html#6c7cfe1944c446ba4115710469c497fd">APPEND_ITERATION_NUMBER_TO_MESH</a>)
<a name="l00872"></a>00872   {
<a name="l00873"></a>00873     <span class="keywordtype">char</span> sint[128];
<a name="l00874"></a>00874     sprintf(sint,<span class="stringliteral">".%i"</span>,group);
<a name="l00875"></a>00875     <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> line(sint);
<a name="l00876"></a>00876     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#114c3d1d75d8854ba833666246872cf3">PUNISHED_FILE</a> + line;
<a name="l00877"></a>00877   }
<a name="l00878"></a>00878   <span class="keywordflow">else</span>
<a name="l00879"></a>00879   {
<a name="l00880"></a>00880     file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#114c3d1d75d8854ba833666246872cf3">PUNISHED_FILE</a>;
<a name="l00881"></a>00881   }
<a name="l00882"></a>00882   <span class="comment">// open output file</span>
<a name="l00883"></a>00883   std::ofstream newfile (file.c_str(),std::ios::out);
<a name="l00884"></a>00884   <span class="keywordflow">if</span>(newfile.is_open())
<a name="l00885"></a>00885   {
<a name="l00886"></a>00886     newfile.precision(12);
<a name="l00887"></a>00887     <span class="keywordflow">if</span>(<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().numPunishedN() &gt; 0)
<a name="l00888"></a>00888     {
<a name="l00889"></a>00889       <span class="comment">// for each vertex moved too many time</span>
<a name="l00890"></a>00890       newfile &lt;&lt; <span class="stringliteral">"# vertices punished for moving MAX_TOUCHES="</span>
<a name="l00891"></a>00891             &lt;&lt; <a class="code" href="controls_8h.html#b5d27c1ff0a05f1eb964e81da504b521">MAX_TOUCHES</a> &lt;&lt; <span class="stringliteral">"times in group="</span> &lt;&lt; group &lt;&lt; endl;
<a name="l00892"></a>00892       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#37680d6b8f28499a1aee927e43cb33c1">vhm_cit</a> i=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().beginN();i!=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().<a class="code" href="classRefractory.html#df953ba6faa72c7c17ef6f1dbcb4399a">endN</a>();i++)
<a name="l00893"></a>00893       {
<a name="l00894"></a>00894         <a class="code" href="classVertex.html">Vertex</a> *v=(*i).first;
<a name="l00895"></a>00895         v-&gt;print(newfile);
<a name="l00896"></a>00896       }
<a name="l00897"></a>00897     }
<a name="l00898"></a>00898     <span class="comment">//if(Refractory::instance().pun_int.empty()==false)</span>
<a name="l00899"></a>00899     <span class="keywordflow">if</span>(<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().numPunishedInt() &gt; 0)
<a name="l00900"></a>00900     {
<a name="l00901"></a>00901       <span class="comment">// for each punished vertex</span>
<a name="l00902"></a>00902       newfile &lt;&lt; <span class="stringliteral">"# vertices punished for causing intersecting faces"</span>
<a name="l00903"></a>00903             &lt;&lt; <span class="stringliteral">" in group="</span> &lt;&lt; group &lt;&lt; endl;
<a name="l00904"></a>00904       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#37680d6b8f28499a1aee927e43cb33c1">vhm_cit</a> i=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().beginInt();i!=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().<a class="code" href="classRefractory.html#e5144133bac71491855a2179928e8d4c">endInt</a>();i++)
<a name="l00905"></a>00905       {
<a name="l00906"></a>00906         <a class="code" href="classVertex.html">Vertex</a> *v=(*i).first;
<a name="l00907"></a>00907         v-&gt;print(newfile);
<a name="l00908"></a>00908       }
<a name="l00909"></a>00909     }
<a name="l00910"></a>00910     <span class="comment">//if(Refractory::instance().pun_ang.empty()==false)</span>
<a name="l00911"></a>00911     <span class="keywordflow">if</span>(<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().numPunishedAng() &gt; 0)
<a name="l00912"></a>00912     {
<a name="l00913"></a>00913       <span class="comment">// for each punished vertex</span>
<a name="l00914"></a>00914       newfile &lt;&lt; <span class="stringliteral">"# vertices punished for causing very small or very large edge angles"</span>
<a name="l00915"></a>00915             &lt;&lt; <span class="stringliteral">" in group="</span> &lt;&lt; group &lt;&lt; endl;
<a name="l00916"></a>00916       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#37680d6b8f28499a1aee927e43cb33c1">vhm_cit</a> i=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().beginAng();i!=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().<a class="code" href="classRefractory.html#cd4ce8a425805d5cbf94c7baf82d7b18">endAng</a>();i++)
<a name="l00917"></a>00917       {
<a name="l00918"></a>00918         <a class="code" href="classVertex.html">Vertex</a> *v=(*i).first;
<a name="l00919"></a>00919         v-&gt;print(newfile);
<a name="l00920"></a>00920       }
<a name="l00921"></a>00921     }
<a name="l00922"></a>00922     <span class="comment">//if(Refractory::instance().pun_com.empty()==false)</span>
<a name="l00923"></a>00923     <span class="keywordflow">if</span>(<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().numPunishedCom() &gt; 0)
<a name="l00924"></a>00924     {
<a name="l00925"></a>00925       <span class="comment">// for each punished vertex</span>
<a name="l00926"></a>00926       newfile &lt;&lt; <span class="stringliteral">"# vertices whose punishment is not "</span>
<a name="l00927"></a>00927             &lt;&lt; <span class="stringliteral">"attributable to either of the above categories"</span> &lt;&lt; endl;
<a name="l00928"></a>00928       <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#37680d6b8f28499a1aee927e43cb33c1">vhm_cit</a> i=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().beginCom();i!=<a class="code" href="classRefractory.html#5c2c61e4313547213a521ae1d106b7b8">Refractory::instance</a>().<a class="code" href="classRefractory.html#9b66fea59c28c6ca78cfc880384b2b58">endCom</a>();i++)
<a name="l00929"></a>00929       {
<a name="l00930"></a>00930         <a class="code" href="classVertex.html">Vertex</a> *v=(*i).first;
<a name="l00931"></a>00931         v-&gt;print(newfile);
<a name="l00932"></a>00932       }
<a name="l00933"></a>00933     }
<a name="l00934"></a>00934     newfile.close();
<a name="l00935"></a>00935   }
<a name="l00936"></a>00936   <span class="keywordflow">else</span>
<a name="l00937"></a>00937   {
<a name="l00938"></a>00938     cout &lt;&lt; <span class="stringliteral">"Vertex_Schedule::writePunished: Error.\n"</span>
<a name="l00939"></a>00939           &lt;&lt; <span class="stringliteral">"Could not open "</span> &lt;&lt; file &lt;&lt; <span class="stringliteral">" for writing punished vertices.\n"</span>;
<a name="l00940"></a>00940   }
<a name="l00941"></a>00941 }
<a name="l00942"></a>00942 
<a name="l00943"></a><a class="code" href="classLog.html#b94d444493c9d8e9280ca07b2c897ef4">00943</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#b94d444493c9d8e9280ca07b2c897ef4">Log::printDetailedInfo</a> (<span class="keywordtype">void</span>)
<a name="l00944"></a>00944 {
<a name="l00945"></a>00945   cout.precision(12);
<a name="l00946"></a>00946   cout &lt;&lt;  <span class="stringliteral">"position       ["</span>
<a name="l00947"></a>00947         &lt;&lt; p_orig[0] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00948"></a>00948         &lt;&lt; p_orig[1] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00949"></a>00949         &lt;&lt; p_orig[2] &lt;&lt; <span class="stringliteral">"]-&gt;["</span>
<a name="l00950"></a>00950         &lt;&lt; p_new[0] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00951"></a>00951         &lt;&lt; p_new[1] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00952"></a>00952         &lt;&lt; p_new[2] &lt;&lt; <span class="stringliteral">"]\n"</span>
<a name="l00953"></a>00953         &lt;&lt; <span class="stringliteral">"closest point  ["</span>
<a name="l00954"></a>00954         &lt;&lt; cp_orig[0] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00955"></a>00955         &lt;&lt; cp_orig[1] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00956"></a>00956         &lt;&lt; cp_orig[2] &lt;&lt; <span class="stringliteral">"]-&gt;["</span>
<a name="l00957"></a>00957         &lt;&lt; cp_new[0] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00958"></a>00958         &lt;&lt; cp_new[1] &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00959"></a>00959         &lt;&lt; cp_new[2] &lt;&lt; <span class="stringliteral">"]\n"</span>
<a name="l00960"></a>00960         &lt;&lt; <span class="stringliteral">"separation dis ["</span>
<a name="l00961"></a>00961         &lt;&lt; sepdis[0] &lt;&lt; <span class="stringliteral">"]-&gt;["</span>
<a name="l00962"></a>00962         &lt;&lt; sepdis[1] &lt;&lt; <span class="stringliteral">"]\n"</span>
<a name="l00963"></a>00963         &lt;&lt; <span class="stringliteral">"virtual disp   ["</span>
<a name="l00964"></a>00964         &lt;&lt; vd_val[0] &lt;&lt; <span class="stringliteral">"]-&gt;["</span>
<a name="l00965"></a>00965         &lt;&lt; vd_val[1] &lt;&lt; <span class="stringliteral">"]\n"</span>
<a name="l00966"></a>00966         &lt;&lt; <span class="stringliteral">"topN rank      ["</span>
<a name="l00967"></a>00967         &lt;&lt; topN_val[0] &lt;&lt; <span class="stringliteral">"]-&gt;["</span>
<a name="l00968"></a>00968         &lt;&lt; topN_val[1] &lt;&lt; <span class="stringliteral">"]\n\n"</span>;
<a name="l00969"></a>00969   <span class="keywordflow">if</span> (vd_val[0]!=vd_val[0])
<a name="l00970"></a>00970   {
<a name="l00971"></a>00971     cout &lt;&lt; <span class="stringliteral">"\n\nLog::printDetailInfo: Error: "</span>
<a name="l00972"></a>00972           &lt;&lt; <span class="stringliteral">"vd_val[0] = "</span> &lt;&lt; vd_val[0] &lt;&lt; endl &lt;&lt; endl;
<a name="l00973"></a>00973     exit(0);
<a name="l00974"></a>00974   }
<a name="l00975"></a>00975 }
<a name="l00976"></a>00976 
<a name="l00977"></a>00977 <span class="preprocessor">#if 0</span>
<a name="l00978"></a>00978 <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="classLog.html#285dab3b4612ad1627f3943e83bd6f5f">Log::print</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l00979"></a>00979 {
<a name="l00980"></a>00980   <span class="comment">// print to stdout</span>
<a name="l00981"></a>00981   <span class="comment">//if(!(count++%1000))</span>
<a name="l00982"></a>00982   <span class="keywordflow">if</span>(<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getNumMovedVertsGroup())
<a name="l00983"></a>00983   {
<a name="l00984"></a>00984     <span class="keywordtype">char</span> name[1024];
<a name="l00985"></a>00985     sprintf(name,<span class="stringliteral">"count %d, "</span>,<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getNumMovedVertsGroup()-1);
<a name="l00986"></a>00986     cout &lt;&lt; name;
<a name="l00987"></a>00987     sprintf(name,<span class="stringliteral">"group %d, "</span>,group);
<a name="l00988"></a>00988     cout &lt;&lt; name;
<a name="l00989"></a>00989     cout.width(45);
<a name="l00990"></a>00990     sprintf(name,<span class="stringliteral">"%s-&gt;%d, "</span>,<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getCurrentVertex()-&gt;getObject()-&gt;getName().c_str(),<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getCurrentVertex()-&gt;getIndex());
<a name="l00991"></a>00991     cout &lt;&lt; left &lt;&lt; name;
<a name="l00992"></a>00992     cout.width(24);
<a name="l00993"></a>00993     sprintf(name,<span class="stringliteral">"vd %.12g, "</span>,sqrt(<a class="code" href="classState.html#cd3aa3488c0124d7d4774ff0f7250685">State::instance</a>().getVD2()));
<a name="l00994"></a>00994     cout &lt;&lt; left &lt;&lt; name;
<a name="l00995"></a>00995     cout.width(24);
<a name="l00996"></a>00996     sprintf(name,<span class="stringliteral">"e %.12g, "</span>,<a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().getEnergy());
<a name="l00997"></a>00997     cout &lt;&lt; left &lt;&lt; name;
<a name="l00998"></a>00998     cout &lt;&lt; endl &lt;&lt; endl;
<a name="l00999"></a>00999   }
<a name="l01000"></a>01000 }
<a name="l01001"></a>01001 <span class="preprocessor">#endif</span>
<a name="l01002"></a>01002 <span class="preprocessor"></span>
<a name="l01003"></a><a class="code" href="classLog.html#285dab3b4612ad1627f3943e83bd6f5f">01003</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#285dab3b4612ad1627f3943e83bd6f5f">Log::print</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> group)
<a name="l01004"></a>01004 {
<a name="l01005"></a>01005   <span class="keywordflow">if</span>(<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getNumMovedVertsGroup())
<a name="l01006"></a>01006   {
<a name="l01007"></a>01007     cout.precision(12);
<a name="l01008"></a>01008     cout &lt;&lt; endl;
<a name="l01009"></a>01009     <span class="keywordflow">if</span> (<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getCurrentVertex()==<a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().getSeedVertex())
<a name="l01010"></a>01010     {
<a name="l01011"></a>01011       cout &lt;&lt; <span class="stringliteral">"SEEDSEEDSEEDSEEDSEEDSEED\n"</span>;
<a name="l01012"></a>01012     }
<a name="l01013"></a>01013     cout &lt;&lt; <span class="stringliteral">"count          "</span> &lt;&lt; <a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().<a class="code" href="classVertex__Schedule.html#802d1b6d13c9f3d82325f80590f46e03">getNumMovedVertsGroup</a>()-1 &lt;&lt; endl
<a name="l01014"></a>01014          &lt;&lt; <span class="stringliteral">"group          "</span> &lt;&lt; group &lt;&lt; endl
<a name="l01015"></a>01015          &lt;&lt; <span class="stringliteral">"object         "</span> &lt;&lt; <a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().<a class="code" href="classVertex__Schedule.html#95a6847f8121f872b1bcf4798a1d0d83">getCurrentVertex</a>()-&gt;<a class="code" href="classVertex.html#9f5e25fd8be3ea577b4fc36069e1179d">getObject</a>()-&gt;<a class="code" href="classObject.html#cc8484b3d564307b5bd801b907b0d72f">getName</a>().c_str() &lt;&lt; endl
<a name="l01016"></a>01016          &lt;&lt; <span class="stringliteral">"vertex         "</span> &lt;&lt; <a class="code" href="classVertex__Schedule.html#73029813663350a537c863c67976bcb6">Vertex_Schedule::instance</a>().<a class="code" href="classVertex__Schedule.html#95a6847f8121f872b1bcf4798a1d0d83">getCurrentVertex</a>()-&gt;<a class="code" href="classVertex.html#0487c340a3a1559f4a8e45d8a7b0f9e2">getIndex</a>() &lt;&lt; endl
<a name="l01017"></a>01017          &lt;&lt; <span class="stringliteral">"displacement   "</span> &lt;&lt; sqrt(<a class="code" href="classState.html#cd3aa3488c0124d7d4774ff0f7250685">State::instance</a>().getVD2()) &lt;&lt; endl
<a name="l01018"></a>01018          &lt;&lt; <span class="stringliteral">"world energy   "</span> &lt;&lt; <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#9d1764072b7c90f9bab7b2744095a361">getEnergy</a>() &lt;&lt; endl
<a name="l01019"></a>01019          &lt;&lt; <span class="stringliteral">"gain           "</span> &lt;&lt; <a class="code" href="classGain__Schedule.html#e9eeedf767171cf65a3fa1ce7728a48d">Gain_Schedule::instance</a>().<a class="code" href="classGain__Schedule.html#c39682e959e22b2ce1a701aa11ab40ad">getGain</a>() &lt;&lt; endl;
<a name="l01020"></a>01020   }
<a name="l01021"></a>01021 }
<a name="l01022"></a>01022 
<a name="l01023"></a><a class="code" href="classLog.html#232190a2a581591642aac6fd6467540f">01023</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#232190a2a581591642aac6fd6467540f">Log::recordTime</a> (<a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> line)
<a name="l01024"></a>01024 {
<a name="l01025"></a>01025   time_t after,diff;
<a name="l01026"></a>01026   after = time (NULL);
<a name="l01027"></a>01027   diff = after-currtime;
<a name="l01028"></a>01028   Mfile &lt;&lt; line &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; diff &lt;&lt; <span class="stringliteral">" seconds\n"</span>;
<a name="l01029"></a>01029   Mfile.flush();
<a name="l01030"></a>01030   currtime = after;
<a name="l01031"></a>01031 }
<a name="l01032"></a>01032 
<a name="l01033"></a><a class="code" href="classLog.html#6b1c1f2e8eba5b16cc15b3ab925372ec">01033</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#6b1c1f2e8eba5b16cc15b3ab925372ec">Log::setTime</a> (time_t t)
<a name="l01034"></a>01034 {
<a name="l01035"></a>01035   currtime = t;
<a name="l01036"></a>01036 }
<a name="l01037"></a>01037 
<a name="l01038"></a><a class="code" href="classLog.html#a7ef9d9b914c949517c05d5c2cb8ab43">01038</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#a7ef9d9b914c949517c05d5c2cb8ab43">Log::mainFileInit</a> (<span class="keywordtype">void</span>)
<a name="l01039"></a>01039 {
<a name="l01040"></a>01040   <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a> log_file = <a class="code" href="controls_8h.html#f7eef64ada0a69e88a1eb0afbd4e812b">OUTPUT_DATA_DIR</a> + <a class="code" href="controls_8h.html#b36b63928f18191d3bae666568fc1154">MAIN_LOG_FILE</a>;
<a name="l01041"></a>01041   Mfile.open(log_file.c_str());
<a name="l01042"></a>01042   <span class="keywordflow">if</span>(Mfile.is_open()==<span class="keyword">false</span>){cout &lt;&lt; <span class="stringliteral">"\nFailed to open file "</span> &lt;&lt; log_file &lt;&lt; <span class="stringliteral">".\n"</span>; }
<a name="l01043"></a>01043 }
<a name="l01044"></a>01044 
<a name="l01045"></a><a class="code" href="classLog.html#7f9732139b741d2bbb9dbdb6e8b957bc">01045</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#7f9732139b741d2bbb9dbdb6e8b957bc">Log::printBad</a> (<span class="keywordtype">void</span>)
<a name="l01046"></a>01046 {
<a name="l01047"></a>01047   <span class="keywordflow">if</span> (vv==NULL){cout &lt;&lt; <span class="stringliteral">"vertex* is NULL.\n"</span>;}
<a name="l01048"></a>01048   <span class="keywordflow">if</span> (p_orig[0]&lt;0){cout &lt;&lt; <span class="stringliteral">"orig pos not set.\n"</span>;}
<a name="l01049"></a>01049   <span class="keywordflow">if</span> (p_new[0]&lt;0){cout &lt;&lt; <span class="stringliteral">"new pos not set.\n"</span>;}
<a name="l01050"></a>01050   <span class="keywordflow">if</span> (cp_orig[0]&lt;0){cout &lt;&lt; <span class="stringliteral">"orig clos pos not set.\n"</span>;}
<a name="l01051"></a>01051   <span class="keywordflow">if</span> (cp_new[0]&lt;0){cout &lt;&lt; <span class="stringliteral">"new clos pos not set.\n"</span>;}
<a name="l01052"></a>01052   <span class="keywordflow">if</span> (topN_val[0]&lt;0){cout &lt;&lt; <span class="stringliteral">"orig topN_val not set.\n"</span>;}
<a name="l01053"></a>01053   <span class="keywordflow">if</span> (topN_val[1]&lt;0){cout &lt;&lt; <span class="stringliteral">"new topN_val not set.\n"</span>;}
<a name="l01054"></a>01054   <span class="keywordflow">if</span> (vd_val[0]&lt;0){cout &lt;&lt; <span class="stringliteral">"orig vd_val not set.\n"</span>;}
<a name="l01055"></a>01055   <span class="keywordflow">if</span> (vd_val[1]&lt;0){cout &lt;&lt; <span class="stringliteral">"new vd_val not set.\n"</span>;}
<a name="l01056"></a>01056   <span class="keywordflow">if</span> (sepdis[0]&lt;0){cout &lt;&lt; <span class="stringliteral">"orig sepdis not set.\n"</span>;}
<a name="l01057"></a>01057   <span class="keywordflow">if</span> (sepdis[1]&lt;0){cout &lt;&lt; <span class="stringliteral">"new sepdis not set.\n"</span>;}
<a name="l01058"></a>01058   cout &lt;&lt; <span class="stringliteral">"p_orig[0] = "</span> &lt;&lt; p_orig[0] &lt;&lt; endl;
<a name="l01059"></a>01059   cout &lt;&lt; <span class="stringliteral">"p_new[0] = "</span> &lt;&lt; p_new[0] &lt;&lt; endl;
<a name="l01060"></a>01060   cout &lt;&lt; <span class="stringliteral">"cp_orig[0] = "</span> &lt;&lt; cp_orig[0] &lt;&lt; endl;
<a name="l01061"></a>01061   cout &lt;&lt; <span class="stringliteral">"cp_new[0] = "</span> &lt;&lt; cp_new[0] &lt;&lt; endl;
<a name="l01062"></a>01062   cout &lt;&lt; <span class="stringliteral">"topN_val[0] = "</span> &lt;&lt; topN_val[0] &lt;&lt; endl;
<a name="l01063"></a>01063   cout &lt;&lt; <span class="stringliteral">"topN_val[1] = "</span> &lt;&lt; topN_val[1] &lt;&lt; endl;
<a name="l01064"></a>01064   cout &lt;&lt; <span class="stringliteral">"vd_val[0] = "</span> &lt;&lt; vd_val[0] &lt;&lt; endl;
<a name="l01065"></a>01065   cout &lt;&lt; <span class="stringliteral">"vd_val[1] = "</span> &lt;&lt; vd_val[1] &lt;&lt; endl;
<a name="l01066"></a>01066   cout &lt;&lt; <span class="stringliteral">"sepdis[0] = "</span> &lt;&lt; sepdis[0] &lt;&lt; endl;
<a name="l01067"></a>01067   cout &lt;&lt; <span class="stringliteral">"sepdis[1] = "</span> &lt;&lt; sepdis[1] &lt;&lt; endl;
<a name="l01068"></a>01068 }
<a name="l01069"></a>01069 
<a name="l01070"></a><a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">01070</a> <a class="code" href="classVertex.html">Vertex</a>* <a class="code" href="classLog.html#6de5cf8b7637de1a27ba5e5fd99a4bf0">Log::getVertex</a> (<span class="keywordtype">void</span>)
<a name="l01071"></a>01071 {
<a name="l01072"></a>01072   <span class="keywordflow">return</span> vv;
<a name="l01073"></a>01073 }
<a name="l01074"></a>01074 
<a name="l01075"></a><a class="code" href="classLog.html#c7a867d72f572a23976a019090e748e2">01075</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#c7a867d72f572a23976a019090e748e2">Log::addVertex</a> (<a class="code" href="classVertex.html">Vertex</a> *uu)
<a name="l01076"></a>01076 {
<a name="l01077"></a>01077   vv=uu;
<a name="l01078"></a>01078 }
<a name="l01079"></a>01079 
<a name="l01080"></a><a class="code" href="classLog.html#21d787c47bd823dd3d133899505d78b6">01080</a> <span class="keywordtype">bool</span> <a class="code" href="classLog.html#21d787c47bd823dd3d133899505d78b6">Log::isGood</a> (<span class="keywordtype">void</span>)
<a name="l01081"></a>01081 {
<a name="l01082"></a>01082   <span class="keywordflow">return</span>        vv!=NULL &amp;&amp;
<a name="l01083"></a>01083         (p_orig[0]&gt;0) &amp;&amp;
<a name="l01084"></a>01084         (p_new[0]&gt;0) &amp;&amp;
<a name="l01085"></a>01085         (cp_orig[0]&gt;0) &amp;&amp;
<a name="l01086"></a>01086         (cp_new[0]&gt;0) &amp;&amp;
<a name="l01087"></a>01087         (topN_val[0]&gt;0) &amp;&amp;
<a name="l01088"></a>01088         (topN_val[1]&gt;0) &amp;&amp;
<a name="l01089"></a>01089         (vd_val[0]&gt;=0) &amp;&amp;
<a name="l01090"></a>01090         (vd_val[1]&gt;=0) &amp;&amp;
<a name="l01091"></a>01091         (sepdis[0]&gt;=0) &amp;&amp;
<a name="l01092"></a>01092         (sepdis[1]&gt;0);
<a name="l01093"></a>01093 }
<a name="l01094"></a>01094 
<a name="l01095"></a><a class="code" href="classLog.html#1aeca51b7682f596bebcc9ee9551a0a7">01095</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#1aeca51b7682f596bebcc9ee9551a0a7">Log::addNewSepDis</a> (<span class="keywordtype">double</span> i)
<a name="l01096"></a>01096 {
<a name="l01097"></a>01097   sepdis[1]=i;
<a name="l01098"></a>01098 }
<a name="l01099"></a>01099 
<a name="l01100"></a><a class="code" href="classLog.html#001039d321955ec993653fc680bff71c">01100</a> <span class="keywordtype">double</span> <a class="code" href="classLog.html#001039d321955ec993653fc680bff71c">Log::getNewSepDis</a> (<span class="keywordtype">void</span>)
<a name="l01101"></a>01101 {
<a name="l01102"></a>01102   <span class="keywordflow">return</span> sepdis[1];
<a name="l01103"></a>01103 }
<a name="l01104"></a>01104 
<a name="l01105"></a><a class="code" href="classLog.html#c7a01379344ed1c5fd8d8a6114cf6abf">01105</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#c7a01379344ed1c5fd8d8a6114cf6abf">Log::addNewVD</a> (<span class="keywordtype">double</span> i)
<a name="l01106"></a>01106 {
<a name="l01107"></a>01107   vd_val[1]=i;
<a name="l01108"></a>01108 }
<a name="l01109"></a>01109 
<a name="l01110"></a><a class="code" href="classLog.html#e50eca07dce029d6ee4a30c036487d31">01110</a> <span class="keywordtype">double</span> <a class="code" href="classLog.html#e50eca07dce029d6ee4a30c036487d31">Log::getNewVD</a> (<span class="keywordtype">void</span>)
<a name="l01111"></a>01111 {
<a name="l01112"></a>01112   <span class="keywordflow">return</span> vd_val[1];
<a name="l01113"></a>01113 }
<a name="l01114"></a>01114 
<a name="l01115"></a><a class="code" href="classLog.html#bf9a8bb669a9ca617e491436d414b836">01115</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#bf9a8bb669a9ca617e491436d414b836">Log::addNewTopN</a> (<span class="keywordtype">double</span> i)
<a name="l01116"></a>01116 {
<a name="l01117"></a>01117   topN_val[1]=i;
<a name="l01118"></a>01118 }
<a name="l01119"></a>01119 
<a name="l01120"></a><a class="code" href="classLog.html#5537d7845f061aafbf82cf6519a1c593">01120</a> <span class="keywordtype">double</span> <a class="code" href="classLog.html#5537d7845f061aafbf82cf6519a1c593">Log::getNewTopN</a> (<span class="keywordtype">void</span>)
<a name="l01121"></a>01121 {
<a name="l01122"></a>01122   <span class="keywordflow">return</span> topN_val[1];
<a name="l01123"></a>01123 }
<a name="l01124"></a>01124 
<a name="l01125"></a><a class="code" href="classLog.html#491a29d917a3fc9c85b6261c3a643039">01125</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#491a29d917a3fc9c85b6261c3a643039">Log::addOrigSepDis</a> (<span class="keywordtype">double</span> i)
<a name="l01126"></a>01126 {
<a name="l01127"></a>01127   sepdis[0]=i;
<a name="l01128"></a>01128 }
<a name="l01129"></a>01129 
<a name="l01130"></a><a class="code" href="classLog.html#1a3580dd9526477fb54c8e773abc2c6e">01130</a> <span class="keywordtype">double</span> <a class="code" href="classLog.html#1a3580dd9526477fb54c8e773abc2c6e">Log::getOrigSepDis</a> (<span class="keywordtype">void</span>)
<a name="l01131"></a>01131 {
<a name="l01132"></a>01132   <span class="keywordflow">return</span> sepdis[0];
<a name="l01133"></a>01133 }
<a name="l01134"></a>01134 
<a name="l01135"></a><a class="code" href="classLog.html#ec8961cbeed53fd59b3754c5595d62b1">01135</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#ec8961cbeed53fd59b3754c5595d62b1">Log::addOrigVD</a> (<span class="keywordtype">double</span> i)
<a name="l01136"></a>01136 {
<a name="l01137"></a>01137   vd_val[0]=i;
<a name="l01138"></a>01138 }
<a name="l01139"></a>01139 
<a name="l01140"></a><a class="code" href="classLog.html#0fae683015d45b0354dc2cdfaa72d63e">01140</a> <span class="keywordtype">double</span> <a class="code" href="classLog.html#0fae683015d45b0354dc2cdfaa72d63e">Log::getOrigVD</a> (<span class="keywordtype">void</span>)
<a name="l01141"></a>01141 {
<a name="l01142"></a>01142   <span class="keywordflow">return</span> vd_val[0];
<a name="l01143"></a>01143 }
<a name="l01144"></a>01144 
<a name="l01145"></a><a class="code" href="classLog.html#774278197bc58c1d7288819ffba07eb0">01145</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#774278197bc58c1d7288819ffba07eb0">Log::addOrigTopN</a> (<span class="keywordtype">double</span> i)
<a name="l01146"></a>01146 {
<a name="l01147"></a>01147   topN_val[0]=i;
<a name="l01148"></a>01148 }
<a name="l01149"></a>01149 
<a name="l01150"></a><a class="code" href="classLog.html#7cf25f41e178f64c5a700b8b370272a3">01150</a> <span class="keywordtype">double</span> <a class="code" href="classLog.html#7cf25f41e178f64c5a700b8b370272a3">Log::getOrigTopN</a> (<span class="keywordtype">void</span>)
<a name="l01151"></a>01151 {
<a name="l01152"></a>01152   <span class="keywordflow">return</span> topN_val[0];
<a name="l01153"></a>01153 }
<a name="l01154"></a>01154 
<a name="l01155"></a><a class="code" href="classLog.html#c2f30bee3c704472a6e76cd43234633c">01155</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#c2f30bee3c704472a6e76cd43234633c">Log::clear</a> (<span class="keywordtype">void</span>)
<a name="l01156"></a>01156 {
<a name="l01157"></a>01157   p_orig[0]  = p_orig[1]  = p_orig[2]  = -1.0;
<a name="l01158"></a>01158   p_new[0]   = p_new[1]   = p_new[2]   = -1.0;
<a name="l01159"></a>01159   cp_orig[0] = cp_orig[1] = cp_orig[2] = -1.0;
<a name="l01160"></a>01160   cp_new[0]  = cp_new[1]  = cp_new[2]  = -1.0;
<a name="l01161"></a>01161   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;2;i++)
<a name="l01162"></a>01162   {
<a name="l01163"></a>01163     topN_val[i]=vd_val[i]=sepdis[i]=-1.0;
<a name="l01164"></a>01164   }
<a name="l01165"></a>01165 }
<a name="l01166"></a>01166 
<a name="l01167"></a>01167 <span class="comment">//void Log::addOrigP(vec_d const &amp;q)</span>
<a name="l01168"></a>01168 <span class="comment">//{</span>
<a name="l01169"></a>01169 <span class="comment">//  p_orig[0]=q[0];</span>
<a name="l01170"></a>01170 <span class="comment">//  p_orig[1]=q[1];</span>
<a name="l01171"></a>01171 <span class="comment">//  p_orig[2]=q[2];</span>
<a name="l01172"></a>01172 <span class="comment">//}</span>
<a name="l01173"></a>01173 
<a name="l01174"></a><a class="code" href="classLog.html#3c77b1e8e4965ec5c78a74362d64d38b">01174</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#3c77b1e8e4965ec5c78a74362d64d38b">Log::addOrigP</a> (<a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> <span class="keyword">const</span> * <span class="keyword">const</span> q)
<a name="l01175"></a>01175 {
<a name="l01176"></a>01176   p_orig[0]=(*q)[0];
<a name="l01177"></a>01177   p_orig[1]=(*q)[1];
<a name="l01178"></a>01178   p_orig[2]=(*q)[2];
<a name="l01179"></a>01179 }
<a name="l01180"></a>01180 
<a name="l01181"></a>01181 <span class="comment">//void Log::getOrigP (double q[3])</span>
<a name="l01182"></a>01182 <span class="comment">//{</span>
<a name="l01183"></a>01183 <span class="comment">//  q[0]=p_orig[0];</span>
<a name="l01184"></a>01184 <span class="comment">//  q[1]=p_orig[1];</span>
<a name="l01185"></a>01185 <span class="comment">//  q[2]=p_orig[2];</span>
<a name="l01186"></a>01186 <span class="comment">//}</span>
<a name="l01187"></a>01187 
<a name="l01188"></a>01188 <span class="comment">//void Log::getNewP (double q[3])</span>
<a name="l01189"></a>01189 <span class="comment">//{</span>
<a name="l01190"></a>01190 <span class="comment">//  q[0]=p_new[0];</span>
<a name="l01191"></a>01191 <span class="comment">//  q[1]=p_new[1];</span>
<a name="l01192"></a>01192 <span class="comment">//  q[2]=p_new[2];</span>
<a name="l01193"></a>01193 <span class="comment">//}</span>
<a name="l01194"></a>01194 
<a name="l01195"></a>01195 <span class="comment">//void Log::addNewP (vec_d const &amp; q)</span>
<a name="l01196"></a>01196 <span class="comment">//{</span>
<a name="l01197"></a>01197 <span class="comment">//  p_new[0]=q[0];</span>
<a name="l01198"></a>01198 <span class="comment">//  p_new[1]=q[1];</span>
<a name="l01199"></a>01199 <span class="comment">//  p_new[2]=q[2];</span>
<a name="l01200"></a>01200 <span class="comment">//}</span>
<a name="l01201"></a>01201 
<a name="l01202"></a><a class="code" href="classLog.html#47a6cf03f9293cc8313241afdd7ff317">01202</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#47a6cf03f9293cc8313241afdd7ff317">Log::addNewP</a> (<a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> <span class="keyword">const</span> * <span class="keyword">const</span> q)
<a name="l01203"></a>01203 {
<a name="l01204"></a>01204   p_new[0]=(*q)[0];
<a name="l01205"></a>01205   p_new[1]=(*q)[1];
<a name="l01206"></a>01206   p_new[2]=(*q)[2];
<a name="l01207"></a>01207 }
<a name="l01208"></a>01208 
<a name="l01209"></a><a class="code" href="classLog.html#fcf1786353f0e7af1a9e5fda653408c2">01209</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#fcf1786353f0e7af1a9e5fda653408c2">Log::addOrigCP</a> (<a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> q)
<a name="l01210"></a>01210 {
<a name="l01211"></a>01211   cp_orig[0]=q[0];
<a name="l01212"></a>01212   cp_orig[1]=q[1];
<a name="l01213"></a>01213   cp_orig[2]=q[2];
<a name="l01214"></a>01214 }
<a name="l01215"></a>01215 
<a name="l01216"></a>01216 <span class="comment">//void Log::getOrigCP (double q[3])</span>
<a name="l01217"></a>01217 <span class="comment">//{</span>
<a name="l01218"></a>01218 <span class="comment">//  q[0]=cp_orig[0];</span>
<a name="l01219"></a>01219 <span class="comment">//  q[1]=cp_orig[1];</span>
<a name="l01220"></a>01220 <span class="comment">//  q[2]=cp_orig[2];</span>
<a name="l01221"></a>01221 <span class="comment">//}</span>
<a name="l01222"></a>01222 
<a name="l01223"></a>01223 <span class="comment">//void Log::getNewCP (double q[3])</span>
<a name="l01224"></a>01224 <span class="comment">//{</span>
<a name="l01225"></a>01225 <span class="comment">//  q[0]=cp_new[0];</span>
<a name="l01226"></a>01226 <span class="comment">//  q[1]=cp_new[1];</span>
<a name="l01227"></a>01227 <span class="comment">//  q[2]=cp_new[2];</span>
<a name="l01228"></a>01228 <span class="comment">//}</span>
<a name="l01229"></a>01229 
<a name="l01230"></a><a class="code" href="classLog.html#7694c707ad522e5c41b0be624bc1672f">01230</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#7694c707ad522e5c41b0be624bc1672f">Log::addNewCP</a> (<a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> q)
<a name="l01231"></a>01231 {
<a name="l01232"></a>01232   cp_new[0]=q[0];
<a name="l01233"></a>01233   cp_new[1]=q[1];
<a name="l01234"></a>01234   cp_new[2]=q[2];
<a name="l01235"></a>01235 }
<a name="l01236"></a>01236 
<a name="l01237"></a><a class="code" href="classLog.html#209d481b307f53d5736954066f98da9f">01237</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#209d481b307f53d5736954066f98da9f">Log::premove</a> (<a class="code" href="classVertex.html">Vertex</a> * v) 
<a name="l01238"></a>01238 {
<a name="l01239"></a>01239   <a class="code" href="classLog.html#c2f30bee3c704472a6e76cd43234633c">clear</a>();
<a name="l01240"></a>01240   <a class="code" href="classLog.html#c7a867d72f572a23976a019090e748e2">addVertex</a>(v);
<a name="l01241"></a>01241   <a class="code" href="classLog.html#3c77b1e8e4965ec5c78a74362d64d38b">addOrigP</a>(v-&gt;<a class="code" href="classVertex.html#9ed4ff6363eac552ef069cb11c2b8642">getPos</a>());
<a name="l01242"></a>01242   <a class="code" href="classLog.html#491a29d917a3fc9c85b6261c3a643039">addOrigSepDis</a>(sqrt(v-&gt;<a class="code" href="classVertex.html#08bdf63722a596fecada59dbc6a2ce67">getSqSepDist</a>()));
<a name="l01243"></a>01243 
<a name="l01244"></a>01244   <span class="keywordtype">int</span> rank;
<a name="l01245"></a>01245   <a class="code" href="meshmorph_8h.html#672a9fdf95e5b89f45943c2b9a6416a6">tv_it</a> t;
<a name="l01246"></a>01246   <span class="keywordflow">if</span> (<a class="code" href="classVirtual__Disp.html#cfa60cce91fdade84b2030b81d70ad22">Virtual_Disp::instance</a>().findTopN(v,t,rank)==<span class="keyword">true</span>)
<a name="l01247"></a>01247   {
<a name="l01248"></a>01248     <a class="code" href="classLog.html#ec8961cbeed53fd59b3754c5595d62b1">addOrigVD</a>(sqrt((*t).first));
<a name="l01249"></a>01249     <a class="code" href="classLog.html#774278197bc58c1d7288819ffba07eb0">addOrigTopN</a>(<a class="code" href="classVirtual__Disp.html#cfa60cce91fdade84b2030b81d70ad22">Virtual_Disp::instance</a>().getSizeTopN()-rank);
<a name="l01250"></a>01250   }
<a name="l01251"></a>01251   <span class="keywordflow">else</span>
<a name="l01252"></a>01252   {
<a name="l01253"></a>01253     <a class="code" href="classLog.html#ec8961cbeed53fd59b3754c5595d62b1">addOrigVD</a>(0);
<a name="l01254"></a>01254     <a class="code" href="classLog.html#774278197bc58c1d7288819ffba07eb0">addOrigTopN</a>(0);
<a name="l01255"></a>01255   }
<a name="l01256"></a>01256   <a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> pC(3,0.0);
<a name="l01257"></a>01257   <span class="keywordflow">if</span> (v-&gt;getFace()!=NULL)
<a name="l01258"></a>01258   {
<a name="l01259"></a>01259     <a class="code" href="meshmorph_8h.html#1f34905de522641c355a51fe9e3f1149">vec_fp</a> fp(1,const_cast&lt;Face*&gt;(v-&gt;getFace()));
<a name="l01260"></a>01260     <span class="keywordtype">double</span> dd=0.0;
<a name="l01261"></a>01261     <a class="code" href="classFace.html">Face</a> *ncl = NULL;
<a name="l01262"></a>01262     <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#b2dcd71e2d3a21f3977a9de3c49e99c9">findClosestPtToVertexAmongFaces</a>(v,fp,pC,dd,ncl);
<a name="l01263"></a>01263   }
<a name="l01264"></a>01264   <a class="code" href="classLog.html#fcf1786353f0e7af1a9e5fda653408c2">addOrigCP</a>(pC);
<a name="l01265"></a>01265 }
<a name="l01266"></a>01266 
<a name="l01267"></a><a class="code" href="classLog.html#60972dd0ae16707aa14a68619127d627">01267</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#60972dd0ae16707aa14a68619127d627">Log::postmove</a> (<a class="code" href="classVertex.html">Vertex</a> * v) 
<a name="l01268"></a>01268 {
<a name="l01269"></a>01269   <a class="code" href="classLog.html#47a6cf03f9293cc8313241afdd7ff317">addNewP</a>(v-&gt;<a class="code" href="classVertex.html#9ed4ff6363eac552ef069cb11c2b8642">getPos</a>());
<a name="l01270"></a>01270   <a class="code" href="classLog.html#1aeca51b7682f596bebcc9ee9551a0a7">addNewSepDis</a>(sqrt(v-&gt;<a class="code" href="classVertex.html#08bdf63722a596fecada59dbc6a2ce67">getSqSepDist</a>()));
<a name="l01271"></a>01271   <span class="keywordtype">int</span> rank;
<a name="l01272"></a>01272   <a class="code" href="meshmorph_8h.html#672a9fdf95e5b89f45943c2b9a6416a6">tv_it</a> t;
<a name="l01273"></a>01273   <span class="keywordflow">if</span> (<a class="code" href="classVirtual__Disp.html#cfa60cce91fdade84b2030b81d70ad22">Virtual_Disp::instance</a>().findTopN(v,t,rank)==<span class="keyword">true</span>)
<a name="l01274"></a>01274   {
<a name="l01275"></a>01275     <a class="code" href="classLog.html#c7a01379344ed1c5fd8d8a6114cf6abf">addNewVD</a>(sqrt((*t).first));
<a name="l01276"></a>01276     <a class="code" href="classLog.html#bf9a8bb669a9ca617e491436d414b836">addNewTopN</a>(<a class="code" href="classVirtual__Disp.html#cfa60cce91fdade84b2030b81d70ad22">Virtual_Disp::instance</a>().getSizeTopN()-rank);
<a name="l01277"></a>01277   }
<a name="l01278"></a>01278   <span class="keywordflow">else</span>
<a name="l01279"></a>01279   {
<a name="l01280"></a>01280     <a class="code" href="classLog.html#c7a01379344ed1c5fd8d8a6114cf6abf">addNewVD</a>(0);
<a name="l01281"></a>01281     <a class="code" href="classLog.html#bf9a8bb669a9ca617e491436d414b836">addNewTopN</a>(0);
<a name="l01282"></a>01282   }
<a name="l01283"></a>01283   <a class="code" href="meshmorph_8h.html#db0ab3db1ab685e2d2bff657e3e86861">vec_d</a> pC(3,0.0);
<a name="l01284"></a>01284   <span class="keywordflow">if</span>(v-&gt;getFace()!=NULL)
<a name="l01285"></a>01285   {
<a name="l01286"></a>01286     <a class="code" href="meshmorph_8h.html#1f34905de522641c355a51fe9e3f1149">vec_fp</a> fp(1,const_cast&lt;Face*&gt;(v-&gt;getFace()));
<a name="l01287"></a>01287     <span class="keywordtype">double</span> dd=0.0;
<a name="l01288"></a>01288     <a class="code" href="classFace.html">Face</a> *ncl = NULL;
<a name="l01289"></a>01289     <a class="code" href="classContainer.html#e4646d7b418a9b302db245f074ad8ec5">Container::instance</a>().<a class="code" href="classContainer.html#b2dcd71e2d3a21f3977a9de3c49e99c9">findClosestPtToVertexAmongFaces</a>(v,fp,pC,dd,ncl);
<a name="l01290"></a>01290   }
<a name="l01291"></a>01291   <a class="code" href="classLog.html#7694c707ad522e5c41b0be624bc1672f">addNewCP</a>(pC);
<a name="l01292"></a>01292   <a class="code" href="classLog.html#b94d444493c9d8e9280ca07b2c897ef4">printDetailedInfo</a>();
<a name="l01293"></a>01293 }
<a name="l01294"></a>01294 
<a name="l01295"></a><a class="code" href="classLog.html#c647e761a24f13ec296b7e00d7f1306b">01295</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#c647e761a24f13ec296b7e00d7f1306b">Log::updateClosestPtStats</a> (<span class="keywordtype">int</span> face_count,<span class="keywordtype">int</span> box_count)
<a name="l01296"></a>01296 {
<a name="l01297"></a>01297   <span class="keywordtype">double</span> previous_face_sum = num_verts*face_mean;
<a name="l01298"></a>01298   <span class="keywordtype">double</span> previous_box_sum  = num_verts*box_mean;
<a name="l01299"></a>01299 
<a name="l01300"></a>01300   num_verts++;
<a name="l01301"></a>01301   face_mean = (previous_face_sum+face_count)/num_verts; 
<a name="l01302"></a>01302   <span class="keywordflow">if</span>(face_count&lt;face_min) face_min=face_count;
<a name="l01303"></a>01303   <span class="keywordflow">if</span>(face_count&gt;face_max) face_max=face_count;
<a name="l01304"></a>01304   box_mean  = (previous_box_sum + box_count)/num_verts; 
<a name="l01305"></a>01305   <span class="keywordflow">if</span>(box_count&lt;box_min) box_min=box_count;
<a name="l01306"></a>01306   <span class="keywordflow">if</span>(box_count&gt;box_max) box_max=box_count;
<a name="l01307"></a>01307 }
<a name="l01308"></a>01308 
<a name="l01309"></a><a class="code" href="classLog.html#5c3cd6d1108c12a47894bd7eac337236">01309</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#5c3cd6d1108c12a47894bd7eac337236">Log::printClosestPtStats</a> (std::ostream &amp; target)<span class="keyword"> const</span>
<a name="l01310"></a>01310 <span class="keyword"></span>{
<a name="l01311"></a>01311   <span class="keywordtype">char</span> <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a>[1024];
<a name="l01312"></a>01312   sprintf(str,<span class="stringliteral">"\nLog: mean number of boxes used in closest pt search = %g\n"</span>,box_mean);
<a name="l01313"></a>01313   target &lt;&lt; str;
<a name="l01314"></a>01314   sprintf(str,<span class="stringliteral">"Log: min  number of boxes used in closest pt search = %d\n"</span>,box_min);
<a name="l01315"></a>01315   target &lt;&lt; str;
<a name="l01316"></a>01316   sprintf(str,<span class="stringliteral">"Log: max  number of boxes used in closest pt search = %d\n"</span>,box_max);
<a name="l01317"></a>01317   target &lt;&lt; str;
<a name="l01318"></a>01318   sprintf(str,<span class="stringliteral">"Log: mean number of faces used in closest pt search = %g\n"</span>,face_mean);
<a name="l01319"></a>01319   target &lt;&lt; str;
<a name="l01320"></a>01320   sprintf(str,<span class="stringliteral">"Log: min  number of faces used in closest pt search = %d\n"</span>,face_min);
<a name="l01321"></a>01321   target &lt;&lt; str;
<a name="l01322"></a>01322   sprintf(str,<span class="stringliteral">"Log: max  number of faces used in closest pt search = %d\n"</span>,face_max);
<a name="l01323"></a>01323   target &lt;&lt; str;
<a name="l01324"></a>01324   sprintf(str,<span class="stringliteral">"Log: number of vertices in closest pt search stats  = %d\n\n"</span>,num_verts);
<a name="l01325"></a>01325   target &lt;&lt; str;
<a name="l01326"></a>01326 }
<a name="l01327"></a>01327 
<a name="l01328"></a><a class="code" href="classLog.html#1e09afe77ce542420db47b5aeafc8cb2">01328</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#1e09afe77ce542420db47b5aeafc8cb2">Log::printNumNonnice</a> (std::ostream &amp; target)<span class="keyword"> const</span>
<a name="l01329"></a>01329 <span class="keyword"></span>{
<a name="l01330"></a>01330   <span class="keywordtype">char</span> <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a>[1024];
<a name="l01331"></a>01331   sprintf(str,<span class="stringliteral">"\nLog: number of nonnice vertices = %d\n\n"</span>,<a class="code" href="classNice.html#0e7a8f2b7f6c9e5a41b4f0a106a7614e">Nice::instance</a>().getNonniceCount(<span class="keyword">false</span>));
<a name="l01332"></a>01332   target &lt;&lt; str;
<a name="l01333"></a>01333 }
<a name="l01334"></a>01334 
<a name="l01335"></a><a class="code" href="classLog.html#afffe6351bfe96546a9566ea180b5da2">01335</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#afffe6351bfe96546a9566ea180b5da2">Log::printNumInt</a> (std::ostream &amp; target)<span class="keyword"> const</span>
<a name="l01336"></a>01336 <span class="keyword"></span>{
<a name="l01337"></a>01337   <span class="keywordtype">char</span> <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a>[1024];
<a name="l01338"></a>01338   <span class="keywordtype">int</span> i = <a class="code" href="classIntersecting__Faces.html#8ccec8bb3cfc50e4ad98ff13c1f8ec8f">Intersecting_Faces::instance</a>().<a class="code" href="classIntersecting__Faces.html#a1a58bcebe21681324ab18ac410383b2">getCountOfIntFaces</a>(<span class="keyword">false</span>);
<a name="l01339"></a>01339   sprintf(str,<span class="stringliteral">"\nLog: number of face intersections = %d\n\n"</span>,i);
<a name="l01340"></a>01340   target &lt;&lt; str;
<a name="l01341"></a>01341 }
<a name="l01342"></a>01342 
<a name="l01343"></a><a class="code" href="classLog.html#abc03faee4c7f2c06a0ad0bc64bbf9de">01343</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#abc03faee4c7f2c06a0ad0bc64bbf9de">Log::updatePartitioningFaceStats</a> (<span class="keywordtype">int</span> box_count)
<a name="l01344"></a>01344 {
<a name="l01345"></a>01345   <span class="keywordtype">double</span> previous_box_sum = num_faces*bpf_mean;
<a name="l01346"></a>01346 
<a name="l01347"></a>01347   num_faces++;
<a name="l01348"></a>01348   bpf_mean = (previous_box_sum+box_count)/num_faces; 
<a name="l01349"></a>01349   <span class="keywordflow">if</span>(box_count&lt;bpf_min) bpf_min=box_count;
<a name="l01350"></a>01350   <span class="keywordflow">if</span>(box_count&gt;bpf_max) bpf_max=box_count;
<a name="l01351"></a>01351 }
<a name="l01352"></a>01352 
<a name="l01353"></a><a class="code" href="classLog.html#0e1f961473575c8e282a6b978c11ec65">01353</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#0e1f961473575c8e282a6b978c11ec65">Log::setPartitioningBoxStats</a> (<span class="keywordtype">void</span>)
<a name="l01354"></a>01354 {
<a name="l01355"></a>01355   <span class="comment">// for each box</span>
<a name="l01356"></a>01356   <span class="keywordflow">for</span>(<a class="code" href="meshmorph_8h.html#d2e9811a10aec6dadc13d24cbee2d8d2">b_cit</a> i=<a class="code" href="classSpace.html#c0c2e1be07b8a675445b46f575d22a87">Space::instance</a>().begin();i!=<a class="code" href="classSpace.html#c0c2e1be07b8a675445b46f575d22a87">Space::instance</a>().<a class="code" href="classSpace.html#aad2c8e734a82c512bcc2b2f37dccc1c">end</a>();i++)
<a name="l01357"></a>01357   {
<a name="l01358"></a>01358     <span class="keywordtype">int</span> face_count = (*i).getNumFaces();
<a name="l01359"></a>01359     <span class="keywordflow">if</span>(face_count==0)
<a name="l01360"></a>01360     {
<a name="l01361"></a>01361       num_empty_boxes++;
<a name="l01362"></a>01362     }
<a name="l01363"></a>01363     <span class="keywordflow">else</span>
<a name="l01364"></a>01364     {
<a name="l01365"></a>01365       <span class="keywordtype">double</span> previous_face_sum = num_boxes*fpb_mean;
<a name="l01366"></a>01366 
<a name="l01367"></a>01367       num_boxes++;
<a name="l01368"></a>01368       fpb_mean = (previous_face_sum+face_count)/num_boxes; 
<a name="l01369"></a>01369       <span class="keywordflow">if</span>(face_count&lt;fpb_min) fpb_min=face_count;
<a name="l01370"></a>01370       <span class="keywordflow">if</span>(face_count&gt;fpb_max) fpb_max=face_count;
<a name="l01371"></a>01371     }
<a name="l01372"></a>01372   }
<a name="l01373"></a>01373 }
<a name="l01374"></a>01374 
<a name="l01375"></a><a class="code" href="classLog.html#5528e95549c8af74a0f1563de8b98a3e">01375</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#5528e95549c8af74a0f1563de8b98a3e">Log::printPartitioningStats</a> (std::ostream &amp; target)<span class="keyword"> const</span>
<a name="l01376"></a>01376 <span class="keyword"></span>{
<a name="l01377"></a>01377   <span class="keywordtype">char</span> <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a>[1024];
<a name="l01378"></a>01378   sprintf(str,<span class="stringliteral">"\nLog: mean number of boxes per face = %g\n"</span>,bpf_mean);
<a name="l01379"></a>01379   target &lt;&lt; str;
<a name="l01380"></a>01380   sprintf(str,<span class="stringliteral">"Log: min  number of boxes per face = %d\n"</span>,bpf_min);
<a name="l01381"></a>01381   target &lt;&lt; str;
<a name="l01382"></a>01382   sprintf(str,<span class="stringliteral">"Log: max  number of boxes per face = %d\n"</span>,bpf_max);
<a name="l01383"></a>01383   target &lt;&lt; str;
<a name="l01384"></a>01384   sprintf(str,<span class="stringliteral">"Log: mean number of faces per box  = %g\n"</span>,fpb_mean);
<a name="l01385"></a>01385   target &lt;&lt; str;
<a name="l01386"></a>01386   sprintf(str,<span class="stringliteral">"Log: min  number of faces per box  = %d\n"</span>,fpb_min);
<a name="l01387"></a>01387   target &lt;&lt; str;
<a name="l01388"></a>01388   sprintf(str,<span class="stringliteral">"Log: max  number of faces per box  = %d\n"</span>,fpb_max);
<a name="l01389"></a>01389   target &lt;&lt; str;
<a name="l01390"></a>01390   sprintf(str,<span class="stringliteral">"Log: number of boxes with no faces = %d\n\n"</span>,num_empty_boxes);
<a name="l01391"></a>01391   target &lt;&lt; str;
<a name="l01392"></a>01392 }
<a name="l01393"></a>01393 
<a name="l01394"></a><a class="code" href="classLog.html#5634b4c0f78fd1e51d00d08fbbaebc9e">01394</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#5634b4c0f78fd1e51d00d08fbbaebc9e">Log::updateVertexSchedulingStats</a> (<span class="keywordtype">int</span> vertex_count)
<a name="l01395"></a>01395 {
<a name="l01396"></a>01396   <span class="keywordtype">double</span> previous_vertex_sum = num_sets*vps_mean;
<a name="l01397"></a>01397 
<a name="l01398"></a>01398   num_sets++;
<a name="l01399"></a>01399   vps_mean = (previous_vertex_sum+vertex_count)/num_sets; 
<a name="l01400"></a>01400   <span class="keywordflow">if</span>(vertex_count&lt;vps_min) vps_min=vertex_count;
<a name="l01401"></a>01401   <span class="keywordflow">if</span>(vertex_count&gt;vps_max) vps_max=vertex_count;
<a name="l01402"></a>01402 }
<a name="l01403"></a>01403 
<a name="l01404"></a><a class="code" href="classLog.html#445ff1de967f5ab8cb153b4a2aaa3909">01404</a> <span class="keywordtype">void</span> <a class="code" href="classLog.html#445ff1de967f5ab8cb153b4a2aaa3909">Log::printVertexSchedulingStats</a> (std::ostream &amp; target)<span class="keyword"> const</span>
<a name="l01405"></a>01405 <span class="keyword"></span>{
<a name="l01406"></a>01406   <span class="keywordtype">char</span> <a class="code" href="meshmorph_8h.html#8be94bb2c91eeb8bba8970efa1a18fd0">str</a>[1024];
<a name="l01407"></a>01407   sprintf(str,<span class="stringliteral">"\nLog: mean number of vertices per moved set = %g\n"</span>,vps_mean);
<a name="l01408"></a>01408   target &lt;&lt; str;
<a name="l01409"></a>01409   sprintf(str,  <span class="stringliteral">"Log: min  number of vertices per moved set = %d\n"</span>,vps_min);
<a name="l01410"></a>01410   target &lt;&lt; str;
<a name="l01411"></a>01411   sprintf(str,  <span class="stringliteral">"Log: max  number of vertices per moved set = %d\n"</span>,vps_max);
<a name="l01412"></a>01412   target &lt;&lt; str;
<a name="l01413"></a>01413   sprintf(str,  <span class="stringliteral">"Log: (note not all vertices in a \"moved set\" are allowed to move)\n\n"</span>);
<a name="l01414"></a>01414   target &lt;&lt; str;
<a name="l01415"></a>01415 }
<a name="l01416"></a>01416 
<a name="l01417"></a>01417 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Jul 18 19:43:40 2008 for meshmorph by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
